(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Process"],{"1c7d":function(e,t,a){"use strict";a("dc15")},dc15:function(e,t,a){},f4ba:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("van-nav-bar",{attrs:{title:"请假申请","left-text":"返回","left-arrow":"","right-text":"我的申请"},on:{"click-left":e.onClickLeft,"click-right":function(t){return e.$router.push("/process/historical")}}})],1),a("div",[a("van-cell",{attrs:{title:"申请类型","is-link":!0,required:!0,center:!0,"arrow-direction":"down",value:e.selectVal},on:{click:function(t){e.show=!0,e.selectVal=e.leaveType[1]}}})],1),a("van-cell",{attrs:{title:"选择日期区间",value:e.Timedate},on:{click:function(t){e.showDate=!0}}}),a("van-calendar",{attrs:{type:"range",color:"#1989fa","allow-same-day":""},on:{confirm:e.onConfirm},model:{value:e.showDate,callback:function(t){e.showDate=t},expression:"showDate"}}),a("van-action-sheet",{attrs:{title:"请假类型"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("div",{staticClass:"content"},[a("van-picker",{attrs:{columns:e.leaveType,"default-index":1,"visible-item-count":"3"},on:{change:e.onChange}})],1)]),a("div",[a("van-field",{attrs:{rows:"2",autosize:"",label:"申请理由",type:"textarea",maxlength:"50",placeholder:"请输入","show-word-limit":""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),a("div",{staticClass:"box"},["请选择"!=e.selectVal&&"请选择"!=e.Timedate&&""!=e.message?a("van-button",{staticClass:"btn",attrs:{type:"info"},on:{click:e.submit}},[e._v("提交申请")]):a("van-button",{staticClass:"btn",attrs:{disabled:"",type:"info"}},[e._v("提交申请")])],1)],1)},i=[],o={name:"process",data(){return{columns:["请假","补卡"],show:!1,selectVal:"请选择",leaveType:[],showDate:!1,showDate:!1,Timedate:"请选择",startT:"",endT:"",message:"",selectValIndex:"1"}},computed:{},methods:{onClickLeft(){this.$router.replace("/")},onChange(e,t,a){this.selectVal=t,this.selectValIndex=a},formatDate(e){return`${e.getMonth()+1}/${e.getDate()}`},onConfirm(e){const[t,a]=e;this.startT=new Date(`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`).getTime(),this.endT=new Date(`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()}`).getTime(),this.showDate=!1,this.Timedate=`${this.formatDate(t)} - ${this.formatDate(a)}`},submit(){"请选择"!=this.selectVal&&"请选择"!=this.Timedate&&""!=this.message?this.$axios.post({url:"/leave/leave",data:{atype:this.selectValIndex,areason:this.message,statTime:this.startT,endTime:this.endT}}).then(e=>{e&&"0"==e.code?(this.Toast.success("提交成功"),this.selectVal="请选择",this.Timedate="请选择",this.message="",setTimeout(()=>{this.$router.replace("/process/historical")},1e3)):e&&"-411"==e.code?this.Toast.fail("选项不能为空"):e&&"-412"==e.code?this.Toast.fail("理由不能为空"):this.Toast.fail("提交失败")}):this.Toast("请选择必填项")}},mounted(){this.Toast.loading({message:"",forbidClick:!0,duration:1e4}),this.$axios.get({url:"/leave/leavetype"}).then(e=>{this.leaveType=e,this.Toast.clear()})}},l=o,n=(a("1c7d"),a("2877")),c=Object(n["a"])(l,s,i,!1,null,"3dea632a",null);t["default"]=c.exports}}]);
//# sourceMappingURL=Process.4057ff06.js.map