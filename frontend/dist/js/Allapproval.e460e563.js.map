{"version":3,"sources":["webpack:///./src/views/process/Allapproval.vue?b00c","webpack:///./src/views/process/Allapproval.vue?c8ca","webpack:///src/views/process/Allapproval.vue","webpack:///./src/views/process/Allapproval.vue?ec0b","webpack:///./src/views/process/Allapproval.vue","webpack:///./src/assets/imgs/moren.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","backOn","onRefresh","model","value","callback","$$v","refreshing","expression","finished","onLoad","loading","_l","item","key","$event","lookMessage","style","color","_v","_s","username","apply_type","staticRenderFns","name","msgArr","onceArr","page","imgs","methods","time","date","Date","Y","getFullYear","M","D","h","m","msgId","localStorage","setItem","JSON","stringify","$router","push","path","$axios","component","module","exports"],"mappings":"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","file":"js/Allapproval.e460e563.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Allapproval.vue?vue&type=style&index=0&id=69533703&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"allapproval\"},[_c('div',{staticClass:\"head\"},[_c('van-nav-bar',{staticClass:\"leave\",attrs:{\"fixed\":\"\",\"title\":\"假事审核\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.backOn}})],1),_c('div',[_c('van-pull-refresh',{staticClass:\"content\",on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.refreshing),callback:function ($$v) {_vm.refreshing=$$v},expression:\"refreshing\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有啦\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.msgArr),function(item){return _c('div',{key:item['leave_id'],staticClass:\"conters\",on:{\"click\":function($event){return _vm.lookMessage(item)}}},[_c('div',{staticClass:\"img\"},[_c('i',[_c('img',{attrs:{\"src\":item['user_head_url'],\"alt\":\"\",\"v-lazy\":item['user_head_url']}})])]),_c('div',{staticClass:\"conter\"},[_c('div',{staticClass:\"conterLeft\"},[_c('p',{staticClass:\"partConters\"},[_c('span',{style:({ color: '#00ff00' })},[_vm._v(\"·\")]),_vm._v(\" \"+_vm._s(item.username)+\" \")]),_c('p',{staticClass:\"partConter\"},[_c('span',{style:({ color: '#00ff00' })},[_vm._v(\"·\")]),_vm._v(\" \"+_vm._s(item.apply_type)+\" \")]),_c('p',{staticClass:\"partConter\"},[_c('span',{style:({ color: '#00ff00' })},[_vm._v(\"·\")]),_vm._v(\" \"+_vm._s(item[\"apply_time\"])+\" \")])]),_c('div',{staticClass:\"conterRight\"},[(item['audit_state'] == 0)?_c('div',[_c('div',{staticClass:\"child\"})]):_c('div',[_c('div',{staticClass:\"read\"})])])])])}),0)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"allapproval\">\n    <div class=\"head\">\n      <van-nav-bar\n        class=\"leave\"\n        fixed\n        title=\"假事审核\"\n        left-text=\"返回\"\n        @click-left=\"backOn\"\n        left-arrow\n      >\n      </van-nav-bar>\n    </div>\n\n    <!-- <div v-if=\"msgArr.length > 0\"> -->\n\n    <div>\n      <van-pull-refresh\n        class=\"content\"\n        v-model=\"refreshing\"\n        @refresh=\"onRefresh\"\n      >\n        <van-list\n          v-model=\"loading\"\n          :finished=\"finished\"\n          finished-text=\"没有啦\"\n          @load=\"onLoad\"\n        >\n          <div\n            class=\"conters\"\n            v-for=\"item in msgArr\"\n            :key=\"item['leave_id']\"\n            @click=\"lookMessage(item)\"\n          >\n            <div class=\"img\">\n              <i>\n                <img\n                  :src=\"item['user_head_url']\"\n                  alt=\"\"\n                  :v-lazy=\"item['user_head_url']\"\n                />\n              </i>\n            </div>\n\n            <div class=\"conter\">\n              <div class=\"conterLeft\">\n                <p class=\"partConters\">\n                  <span :style=\"{ color: '#00ff00' }\">·</span>\n                  {{ item.username }}\n                </p>\n\n                <p class=\"partConter\">\n                  <span :style=\"{ color: '#00ff00' }\">·</span>\n                  {{ item.apply_type }}\n                </p>\n\n                <p class=\"partConter\">\n                  <span :style=\"{ color: '#00ff00' }\">·</span>\n                  {{ item[\"apply_time\"] }}\n                </p>\n              </div>\n\n              <div class=\"conterRight\">\n                <div v-if=\"item['audit_state'] == 0\">\n                  <div class=\"child\"></div>\n                </div>\n\n                <div v-else>\n                  <div class=\"read\"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </van-list>\n\n        <!-- <div class=\"messageNull\" v-if=\"msgArr.length == 0\">\n                    暂无工作通知\n                </div> -->\n      </van-pull-refresh>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Allapproval\",\n  data() {\n    return {\n      loading: false, // 加载数据\n      finished: false, //数据完全加载完\n      refreshing: false,\n      msgArr: [],\n      onceArr: [],\n      page: \"\", //页数\n      imgs: require(\"../../assets/imgs/moren.png\"), //默认头像\n    };\n  },\n\n  mounted() {\n    //更新当前页数\n    this.page = this.page || 1;\n  },\n\n  methods: {\n    // 时间戳转换成时间\n    timestampToTime(time) {\n      let date = new Date(time); //时间戳为10位需*1000，时间戳为13位的话不需乘1000\n      let Y = date.getFullYear() + \"-\";\n      let M =\n        (date.getMonth() + 1 < 10\n          ? \"0\" + (date.getMonth() + 1)\n          : date.getMonth() + 1) + \"-\";\n      let D =\n        (date.getDate() + 1 < 10 ? \"0\" + date.getDate() : date.getDate()) + \" \";\n      let h =\n        (date.getHours() + 1 < 10 ? \"0\" + date.getHours() : date.getHours()) +\n        \":\";\n      let m =\n        date.getMinutes() + 1 < 10\n          ? \"0\" + date.getMinutes()\n          : date.getMinutes();\n      return Y + M + D + h + m;\n      // console.log(timestampToTime (1533293827000))\n    },\n\n    //阅读工作通知\n    lookMessage(msgId) {\n      localStorage.setItem(\"data\", JSON.stringify(msgId));\n      this.$router.push({\n        path: \"/detailsapproval\",\n        // query:{\n        //     data:JSON.stringify(msgId)\n        // }\n      });\n    },\n\n    //无线加载数据更新\n    onLoad() {\n      this.$axios\n        .get({\n          url: \"/leave/pendingapproval\",\n          params: {\n            page: this.page,\n          },\n        })\n        .then((res) => {\n          console.log(res);\n\n          //下拉加载\n          if (this.refreshing) {\n            this.msgArr = [];\n            this.refreshing = false;\n          }\n\n          //渲染数据\n          if (res && res.data) {\n            for (let i = 0; i < res.data.length; i++) {\n              //换算时间\n              res.data[i][\"apply_time\"] = this.timestampToTime(\n                res.data[i][\"apply_time\"]\n              );\n\n              //设置头像\n              if (\n                res.data[i][\"user_head_url\"] == null ||\n                res.data[i][\"user_head_url\"] == \"\"\n              ) {\n                res.data[i][\"user_head_url\"] = this.imgs;\n              } else {\n                res.data[i][\"user_head_url\"] =\n                  require('../../config').baseURL + \"/imgs/temporary/\" +\n                  res.data[i][\"user_head_url\"];\n              }\n\n              this.msgArr.push(res.data[i]);\n              this.msgArr = this.msgArr.reverse();\n            }\n          }\n\n          //加载完成\n          this.loading = false;\n\n          //当前页数\n          this.page += 1;\n\n          //数据全部加载完成\n          if (this.page > res.pagetotle) {\n            this.finished = true;\n          } else if (!res.pagetotle) {\n            this.finished = true;\n          }\n        });\n    },\n\n    onRefresh() {\n      // 清空列表数据\n      this.finished = false;\n\n      //page重载为一\n      this.page = 1;\n\n      // 重新加载数据\n      this.onLoad();\n\n      // console.log(this.data)\n\n      // 将 loading 设置为 true，表示处于加载状态\n      this.loading = true;\n    },\n\n    backOn() {\n      this.$router.push(\"/about\");\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.allapproval {\n  padding-top: 7vh;\n  padding-bottom: 7vh;\n  overflow-y: scroll;\n  overflow-x: hidden;\n\n  .leave {\n    height: 7vh;\n  }\n}\n\n.conters {\n  width: 90%;\n  height: auto;\n  display: flex;\n  align-content: stretch;\n  background-color: #fff;\n  border-radius: 5px;\n  margin: 1vh auto;\n  .img {\n    flex: 2;\n    background-color: #fff;\n    border-radius: 5px;\n    i {\n      display: block;\n      width: 3rem;\n      height: 3rem;\n      border-radius: 3rem;\n      background-size: 3rem 3rem;\n      border: none;\n      margin: calc((100% - 1rem) / 2) auto;\n      img {\n        width: 3rem;\n        height: 3rem;\n      }\n    }\n  }\n  .conter {\n    flex: 8;\n    .partConters {\n      padding-top: 0.3rem;\n      font-size: 1rem;\n    }\n    .partConter {\n      padding-top: 0.1rem;\n      font-size: 0.8rem;\n      color: #aaa;\n      display: -webkit-box;\n      -webkit-box-orient: vertical;\n      -webkit-line-clamp: 1;\n    }\n\n    p {\n      margin: 0.4rem 0.16rem;\n    }\n  }\n\n  .conterLeft {\n    float: left;\n    width: 65%;\n    height: 5rem;\n  }\n\n  .conterRight {\n    float: right;\n    width: 35%;\n\n    //未读\n    .child {\n      float: right;\n      margin-top: 1.2rem;\n      margin-right: 1.2rem;\n      width: 0.3rem;\n      height: 0.3rem;\n      background: red;\n      border-radius: 5px;\n    }\n\n    //已读\n    .read {\n      float: right;\n      margin-top: 1.2rem;\n      margin-right: 1.2rem;\n      width: 0.4rem;\n      height: 0.4rem;\n      background: #fff;\n      border-radius: 4px;\n    }\n\n    .conterRightTime {\n      margin-top: 2.5rem;\n      clear: right;\n      width: 90%;\n      text-align: right;\n      font-size: 0.1rem;\n      color: #9a9a9a;\n    }\n  }\n}\n\n.messageNull {\n  margin: 3rem auto;\n  width: 80%;\n  text-align: center;\n  color: #787887;\n}\n.content {\n  height: 100vh;\n}\n/deep/ .van-icon-arrow-left {\n  color: #000;\n  font-size: 1rem;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Allapproval.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Allapproval.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Allapproval.vue?vue&type=template&id=69533703&scoped=true&\"\nimport script from \"./Allapproval.vue?vue&type=script&lang=js&\"\nexport * from \"./Allapproval.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Allapproval.vue?vue&type=style&index=0&id=69533703&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69533703\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/moren.5c56d74a.png\";"],"sourceRoot":""}