(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Login"],{"1c03":function(e,t,s){},"3ba9":function(e,t,s){"use strict";s("1c03")},"5ec9":function(e,t,s){},7734:function(e,t,s){"use strict";t["a"]={checkPhone(e){return!!/^1(3|4|5|6|7|8|9)\d{9}$/.test(e)},stampChangehHonurs:function(){let e=(new Date).getHours(),t=(new Date).getMinutes(),s=(new Date).getSeconds();return`${this.add0(e)}:${this.add0(t)}:${this.add0(s)}`},add0(e){return e<10?"0"+e:e},timeChangeDate(e){let t=new Date(e);return`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`}}},"7f3e":function(e,t,s){"use strict";s("ffd7")},"8b16":function(e,t,s){"use strict";s("5ec9")},ede4:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"logins"},[s("keep-alive",[s(e.change,{tag:"component"})],1),"LoginPsd"==e.change?s("div",[s("p",{on:{click:function(t){e.change="LoginCodes"}}},[e._v("验证码登录")])]):s("div",[s("p",{on:{click:function(t){e.change="LoginPsd"}}},[e._v("密码登录")])]),s("p",{staticClass:"agreement "})],1)},o=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("div",{staticClass:"logins"},[s("h2",[e._v("登录")]),s("div",{staticClass:"phone"},[s("van-field",{staticClass:"inp",attrs:{placeholder:"请输入手机号",type:"tel",label:"手机号"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),s("div",{staticClass:"psd"},[s("van-field",{staticClass:"inp",attrs:{placeholder:"请输入密码",type:"password",label:"密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),""!=e.username&&""!=e.password?s("van-button",{attrs:{type:"info"},on:{click:e.loginpsd}},[e._v("登录")]):s("van-button",{attrs:{disabled:"",type:"info"}},[e._v("登录")])],1)])},n=[],l=s("7734"),c=(s("f552"),{name:"LoginCode",data(){return{username:"",password:""}},methods:{loginpsd(){l["a"].checkPhone(this.username)?(this.Toast.loading({message:"登录中...",forbidClick:!0,duration:0}),this.$axios.post({url:"/user/login",data:{phone:this.username,userpawd:this.password}}).then(e=>"10"==e.code?(this.Toast.clear(),void this.$router.push({path:"/"})):"-11"==e.code?(this.Toast.clear(),void this.Toast.fail("用户名或密码错误")):void("-403"==e.code?(this.Toast.clear(),this.Toast.fail("账户已被冻结，请联系管理员处理")):(this.Toast.clear(),this.Toast.fail("登陆失败，请稍后再试"))),e=>{this.Toast.fail("登陆失败")})):this.Toast.fail("手机号不符合格式")}},mounted(){this.Toast.clear()}}),r=c,d=(s("7f3e"),s("2877")),u=Object(d["a"])(r,i,n,!1,null,"e81d4600",null),h=u.exports,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("div",{staticClass:"logins"},[s("h2",[e._v("登录")]),s("div",{staticClass:"phone"},[s("van-field",{staticClass:"inp",attrs:{type:"tel",placeholder:"请输入手机号",label:"手机号"},model:{value:e.userphone,callback:function(t){e.userphone=t},expression:"userphone"}})],1),s("div",{staticClass:"code"},[s("van-field",{staticClass:"inp",attrs:{clearable:"",label:"验证码",placeholder:"请输入短信验证码"},scopedSlots:e._u([{key:"button",fn:function(){return[e.downcode<=0?s("van-button",{staticClass:"getco",attrs:{size:"small",plain:"",hairline:"",type:"info"},on:{click:e.getcode}},[e._v(" 发送验证码")]):s("van-button",{staticClass:"seconed",attrs:{size:"small",type:"default"}},[e._v(e._s(e.downcode)+"秒")])]},proxy:!0}]),model:{value:e.usercode,callback:function(t){e.usercode=t},expression:"usercode"}})],1),""!=e.userphone&&""!=e.usercode?s("van-button",{attrs:{type:"info"},on:{click:e.enter}},[e._v("登录")]):s("van-button",{attrs:{disabled:"",type:"info"}},[e._v("登录")])],1)])},f=[],v={name:"LoginCode",data(){return{dialogVisible:!1,downcode:0,userphone:"",usercode:"",login:""}},methods:{getcode(){this.userphone?l["a"].checkPhone(this.userphone)?this.$axios.post({url:"/sms/kcode",data:{phone:this.userphone}}).then(e=>{if("0"==e.code)this.Toast.success("验证码发送成功");else{if("-20"==e.code)return void this.Toast.fail("请输入正确的手机号");if("-25"==e.code)return void this.Toast.fail("该用户未注册,请到相关部门完成注册");"-403"==e.code?(this.Toast.clear(),this.Toast.fail("账户已被冻结，请联系管理员处理")):(this.Toast.clear(),this.Toast.fail("登陆失败，请稍后再试"))}this.downcode=60;let t=()=>{setTimeout(()=>{this.downcode--,t()},1e3)};t()}):this.Toast.fail("请填写正确的手机号"):this.Toast.fail("请填写手机号")},enter(){l["a"].checkPhone(this.userphone)?(this.Toast.loading({message:"登录中...",forbidClick:!0,duration:5e3}),this.$axios.post({url:"/user/verif_login",data:{phone:this.userphone,verif:this.usercode}}).then(e=>{if(10==e.code)return this.Toast.clear(),void this.$router.push({path:"/"});-15!=e.code?-403!=e.code?-405!=e.code?this.Toast.fail("登陆失败，请稍再试"):this.Toast.fail("账号不存在"):this.Toast.fail("账号已被冻结"):this.Toast.fail("验证码有误")})):this.Toast.fail("手机号不符合格式")}},mounted(){this.Toast.clear()}},g=v,m=(s("8b16"),Object(d["a"])(g,p,f,!1,null,"4b48af47",null)),b=m.exports,T={name:"Login",data(){return{change:"LoginCodes",flag:!1}},components:{LoginCodes:b,LoginPsd:h}},C=T,w=(s("3ba9"),Object(d["a"])(C,a,o,!1,null,"3cc5eeae",null));t["default"]=w.exports},ffd7:function(e,t,s){}}]);
//# sourceMappingURL=Login.ffa85ad9.js.map