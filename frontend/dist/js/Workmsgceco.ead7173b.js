(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Workmsgceco"],{"1eaa":function(e,t,s){},"34a7":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Choicecontacts"},[s("div",{staticClass:"head"},[s("van-nav-bar",{attrs:{title:"选择联系人","left-text":"返回","left-arrow":""},on:{"click-left":e.backon},scopedSlots:e._u([{key:"right",fn:function(){return[s("van-icon",{attrs:{name:"search",size:"18"},on:{click:e.querys}})]},proxy:!0}])})],1),s("div",{staticClass:"body"},[s("van-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.everyoneArr,(function(t,a){return s("van-collapse-item",{key:a,attrs:{title:a,name:a}},[s("van-button",{attrs:{type:"default"},on:{click:function(s){return e.chunk(t)}},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),s("van-button",{attrs:{type:"default"},on:{click:function(s){return e.check(t)}}},[e._v("取消")]),s("van-checkbox-group",{model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},[s("van-cell-group",e._l(t,(function(t){return s("van-cell",{key:t["user_id"],attrs:{clickable:"",title:" "+t["username"]},scopedSlots:e._u([{key:"right-icon",fn:function(){return[s("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{name:t}})]},proxy:!0}],null,!0)})})),1)],1)],1)})),1)],1),s("van-popup",{style:{height:"7%"},attrs:{position:"top"},model:{value:e.showQuery,callback:function(t){e.showQuery=t},expression:"showQuery"}},[s("div",{staticClass:"querysClick"},[s("van-field",{style:{height:"100%"},attrs:{center:"",clearable:"",placeholder:"请输入用户名或部门"},scopedSlots:e._u([{key:"button",fn:function(){return[s("van-button",{staticClass:"btn",attrs:{plain:"",type:"info"},on:{click:e.queryClick}},[e._v("确认搜索")])]},proxy:!0}]),model:{value:e.sms,callback:function(t){e.sms=t},expression:"sms"}})],1)]),s("div",{staticClass:"upload"},[s("van-goods-action",[s("van-goods-action-icon",{attrs:{icon:"chat-o"}},[e._v("已选 "+e._s(e.result.length)+" 人 ")]),s("van-goods-action-button",{attrs:{type:"danger",text:"确定"},on:{click:e.onClickButton}})],1)],1)],1)},n=[],o={name:"Choicecontacts",data(){return{everyoneArr:[],checkedVal:[],activeNames:[],result:[],showQuery:!1,checkAll:!1,sms:"",nowLoginId:""}},mounted(){this.rander()},methods:{rander(){this.Toast.loading({message:"",forbidClick:!0,duration:1e4}),this.$axios.get({url:"message/maillist"}).then(e=>{console.log(e),e&&this.handleData(e),this.Toast.clear()})},querys(){this.showQuery=!0},queryClick(){let e=this.sms.trim();if(""==e)return"搜索信息不能为空";this.$axios.post({url:"message/querylist",data:{msg:e}}).then(e=>{if(0==e.code){let t={};for(let s=0;s<e.data.length;s++)console.log(t[e.data[s].name]),void 0!=t[e.data[s].name]||(t[e.data[s].name]=[]),t[e.data[s].name].push(e.data[s]);this.everyoneArr=t,this.sms="",this.showQuery=!1}else this.Toast(e.message),this.sms="",this.showQuery=!1})},check:function(e){if(console.log(e),!(this.result<=0))for(let t=0;t<this.result.length;t++)for(let s=0;s<e.length;s++)console.log(t,s,void 0==this.result[0]),this.result[t]["user_id"]==e[s]["user_id"]&&this.result.splice(t,1)},chunk:function(e){this.result.push(...e),this.result=[...new Set(this.result)]},onClickButton(){this.result.length<=0?this.Toast("至少选择一人"):this.$router.push({path:"/workmessage/workmessagesend",query:{data:JSON.stringify(this.result)}})},backon(){this.$router.push("/workmessage/workmessagesend")},handleData({dataArr:e,listArr:t}){console.log(e,t);let s={};for(let a=0;a<t.length;a++){s[t[a]["name"]]=[];for(let n=0;n<e.length;n++)t[a]["department_id"]==e[n]["department_id"]&&s[t[a]["name"]].push(e[n])}this.everyoneArr=s}}},l=o,r=(s("3b56"),s("2877")),i=Object(r["a"])(l,a,n,!1,null,"4bbf264f",null);t["default"]=i.exports},"3b56":function(e,t,s){"use strict";s("1eaa")}}]);
//# sourceMappingURL=Workmsgceco.ead7173b.js.map