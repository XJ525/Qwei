(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Workhistory"],{"3e19":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"workhistory"},[a("div",{staticClass:"head"},[a("van-nav-bar",{attrs:{title:"历史日志",fixed:"","left-text":"返回","left-arrow":""},on:{"click-left":t.backOn}})],1),a("div",{staticClass:"contents"},[a("van-pull-refresh",{staticClass:"content",on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":t.text},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.msgArr,(function(e){return a("div",{key:e["leave_id"],staticClass:"conters",on:{click:function(a){return t.lookworkapproval(e)}}},[a("div",{staticClass:"img"},[a("i",[a("img",{attrs:{src:e["user_head_url"],alt:"","v-lazy":e["user_head_url"]}})])]),a("div",{staticClass:"conter"},[a("div",{staticClass:"conterLeft"},[a("p",{staticClass:"dutym"},[a("span",{staticClass:"dutyperson"},[t._v("负责人：")]),a("span",{staticClass:"duty"},[t._v(" "+t._s(e.username)+" ")])]),a("p",{staticClass:"logcontent"},[a("span",[t._v("内容：")]),a("span",[t._v(" "+t._s(e["log_content"])+" ")])]),a("p",{staticClass:"partConter"},[a("span",[t._v("提交时间：")]),a("span",[t._v(" "+t._s(e["log_time"])+" ")])])]),a("div",{staticClass:"conterRight"},["已批阅"==e["log_read_state"]?a("div",{staticClass:"read"},[t._v(" "+t._s(e["log_read_state"])+" ")]):a("div",{staticClass:"child"},[t._v(t._s(e["log_read_state"]))])])])])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.Noleave,expression:"Noleave"}],staticClass:"nocentent"},[t._v("暂无提交日志")])],1)],1)])},i=[],r={name:"Workhistory",data(){return{loading:!1,finished:!1,refreshing:!1,msgArr:[],page:"",imgs:a("f89e"),Noleave:!1,text:"已经到底了"}},mounted(){this.page=this.page||1},methods:{timestampToTime(t){let e=new Date(t),a=e.getFullYear()+"-",s=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",i=(e.getDate()+1<10?"0"+e.getDate():e.getDate())+" ";return a+s+i},onLoad(){this.$axios.get({url:"/worklog/historyworklog",params:{page:this.page}}).then(t=>{if(t&&-405==t.code&&(this.Noleave=!0,this.text=""),this.refreshing&&(this.msgArr=[],this.refreshing=!1),t&&t.data)for(let e=0;e<t.data.length;e++)t.data[e]["log_time"]=this.timestampToTime(t.data[e]["log_time"]),null==t.data[e]["user_head_url"]||""==t.data[e]["user_head_url"]?t.data[e]["user_head_url"]=this.imgs:t.data[e]["user_head_url"]=a("f121").baseURL+"/imgs/temporary/"+t.data[e]["user_head_url"],0==t.data[e].log_read_state?t.data[e].log_read_state="未批阅":t.data[e].log_read_state="已批阅",this.msgArr.push(t.data[e]),this.msgArr=this.msgArr.reverse();this.loading=!1,this.page+=1,this.page>t.pageOverall?this.finished=!0:t.pageOverall||(this.finished=!0)})},onRefresh(){this.finished=!1,this.page=1,this.onLoad(),this.loading=!0},backOn(){this.$router.push({path:"/workdiary"})},lookworkapproval(t){console.log(t),localStorage.setItem("data",JSON.stringify(t)),this.$router.push({path:"/myworkdetails"})}}},o=r,n=(a("4803"),a("2877")),l=Object(n["a"])(o,s,i,!1,null,"c5aebeb0",null);e["default"]=l.exports},"423c":function(t,e,a){},4803:function(t,e,a){"use strict";a("423c")},f89e:function(t,e,a){t.exports=a.p+"img/moren.5c56d74a.png"}}]);
//# sourceMappingURL=Workhistory.67046e94.js.map