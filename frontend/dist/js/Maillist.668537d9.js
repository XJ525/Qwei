(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Maillist"],{"0959":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"maillist"},[s("div",{staticClass:"head"},[s("van-nav-bar",{attrs:{title:"联系人","left-text":"返回","left-arrow":""},scopedSlots:e._u([{key:"right",fn:function(){return[s("van-icon",{attrs:{name:"search",size:"18"},on:{click:e.querys}})]},proxy:!0}])})],1),e.everyoneArr?s("div",{staticClass:"main"},e._l(e.everyoneArr,(function(t,a){return s("van-index-anchor",{key:a,attrs:{index:"1"}},[e._v(" "+e._s(a)+" "),e._l(t,(function(t,a){return s("van-cell",{key:a,attrs:{title:t.username},on:{click:function(s){return e.seeMsg(t["user_id"])}}},[s("div",{staticClass:"everyOneMsg"},[s("p",{staticClass:"userName"},[e._v(" > ")])])])}))],2)})),1):s("div",{staticClass:"load"},[s("van-loading",{attrs:{size:"24px"}},[e._v("加载中...")])],1),s("van-popup",{style:{height:"7%"},attrs:{position:"top"},model:{value:e.showQuery,callback:function(t){e.showQuery=t},expression:"showQuery"}},[s("div",{staticClass:"querysClick"},[s("van-field",{style:{height:"100%"},attrs:{center:"",clearable:"",placeholder:"请输入用户名或部门"},scopedSlots:e._u([{key:"button",fn:function(){return[s("van-button",{staticClass:"btn",attrs:{plain:"",type:"info"},on:{click:e.queryClick}},[e._v("确认搜索")])]},proxy:!0}]),model:{value:e.sms,callback:function(t){e.sms=t},expression:"sms"}})],1)])],1)},i=[],r={name:"Maillist",data(){return{indexList:[],everyoneArr:{},sms:"",showQuery:!1}},mounted(){this.rander()},methods:{rander(){this.Toast.loading({message:"",forbidClick:!0,duration:1e4}),this.$axios.get({url:"message/maillist"}).then(e=>{e&&0==e.code&&this.handleData(e),this.Toast.clear()})},querys(){this.showQuery=!0},queryClick(){let e=this.sms.trim();if(""==e)return"搜索信息不能为空";this.$axios.post({url:"message/querylist",data:{msg:e}}).then(e=>{if(0==e.code){let t={};for(let s=0;s<e.data.length;s++)void 0!=t[e.data[s].name]||(t[e.data[s].name]=[]),t[e.data[s].name].push(e.data[s]);this.everyoneArr=t,this.sms="",this.showQuery=!1}else this.Toast(e.message),this.sms="",this.showQuery=!1})},seeMsg(e){this.$router.push("/maillist/seemaillist?msgId="+e)},handleData({dataArr:e,listArr:t}){let s={};for(let a=0;a<t.length;a++){s[t[a]["name"]]=[];for(let i=0;i<e.length;i++)t[a]["department_id"]==e[i]["department_id"]&&s[t[a]["name"]].push(e[i])}this.everyoneArr=s}}},n=r,l=(s("e433"),s("2877")),o=Object(l["a"])(n,a,i,!1,null,null,null);t["default"]=o.exports},"7a95":function(e,t,s){},e433:function(e,t,s){"use strict";s("7a95")}}]);
//# sourceMappingURL=Maillist.668537d9.js.map