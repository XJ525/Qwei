(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Historical"],{"8b23":function(t,e,a){},a038:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"historical"},[a("div",{staticClass:"head"},[a("van-nav-bar",{attrs:{title:"我的申请","left-text":"返回","left-arrow":""},on:{"click-left":t.backOn}})],1),a("div",[a("van-pull-refresh",{staticClass:"content",on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":t.text},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.msgArr,(function(e){return a("div",{key:e["leave_id"],staticClass:"conters",on:{click:function(a){return t.lookMessage(e)}}},[a("div",{staticClass:"img"},[a("i",[a("img",{attrs:{src:e["user_head_url"],alt:"","v-lazy":e["user_head_url"]}})])]),a("div",{staticClass:"conter"},[a("div",{staticClass:"conterLeft"},[a("p",[a("span",{style:{color:"#00ff00",fontSize:"1rem"}},[t._v("·")]),t._v(" "+t._s(e.username)+" ")]),a("p",{staticClass:"partConter"},[a("span",{style:{color:"#00ff00"}},[t._v("·")]),t._v(" 请假类型："+t._s(e.apply_type)+" ")]),a("p",{staticClass:"partConter"},[a("span",{style:{color:"#00ff00"}},[t._v("·")]),t._v(" 申请时间："+t._s(e["apply_time"])+" ")]),a("p",{staticClass:"partConter"},[a("span",{style:{color:"#00ff00"}},[t._v("·")]),t._v(" "+t._s(e["start_time"])+" / "+t._s(e["end_time"])+" ")])]),a("div",{staticClass:"conterRight"},["通过"==e["audit_state"]?a("div",{staticClass:"read"},[t._v(t._s(e["audit_state"])+" ")]):"未通过"==e["audit_state"]?a("div",{staticClass:"noread"},[t._v(t._s(e["audit_state"])+" ")]):a("div",{staticClass:"child"},[t._v(t._s(e["audit_state"])+" ")])])])])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.Noleave,expression:"Noleave"}],staticClass:"nocentent"},[t._v(" 当前没有假事 ")])],1)],1)])},i=[],r={name:"historical",data(){return{loading:!1,finished:!1,refreshing:!1,msgArr:[],page:"",imgs:a("f89e"),Noleave:!1,text:"已经到底了"}},mounted(){this.page=this.page||1},methods:{lookMessage(t){localStorage.setItem("data",JSON.stringify(t)),this.$router.push({path:"/myhistorical"})},timestampToTime(t){let e=new Date(t),a=e.getFullYear()+"-",s=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",i=(e.getDate()+1<10?"0"+e.getDate():e.getDate())+" ";return a+s+i},onLoad(){this.$axios.get({url:"/leave/myleaves",params:{page:this.page}}).then(t=>{if(console.log(t),t&&-405==t.code&&(this.Noleave=!0,this.text=""),this.refreshing&&(this.msgArr=[],this.refreshing=!1),t&&t.data)for(let e=0;e<t.data.length;e++)t.data[e]["apply_time"]=this.timestampToTime(t.data[e]["apply_time"]),null==t.data[e]["user_head_url"]||""==t.data[e]["user_head_url"]?t.data[e]["user_head_url"]=this.imgs:t.data[e]["user_head_url"]=a("f121").baseURL+"/imgs/temporary/"+t.data[e]["user_head_url"],0==t.data[e].audit_state?t.data[e].audit_state="未审核":1==t.data[e].audit_state?t.data[e].audit_state="通过":2==t.data[e].audit_state&&(t.data[e].audit_state="未通过"),t.data[e].start_time=this.timestampToTime(t.data[e].start_time),t.data[e].end_time=this.timestampToTime(t.data[e].end_time),this.msgArr.push(t.data[e]),this.msgArr=this.msgArr.reverse();this.loading=!1,this.page+=1,this.page>t.pagetotle?this.finished=!0:t.pagetotle||(this.finished=!0)})},onRefresh(){this.finished=!1,this.page=1,this.onLoad(),this.loading=!0},backOn(){this.$router.push({path:"/process"})}}},n=r,l=(a("ecdf"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"5b789cc5",null);e["default"]=o.exports},ecdf:function(t,e,a){"use strict";a("8b23")},f89e:function(t,e,a){t.exports=a.p+"img/moren.5c56d74a.png"}}]);
//# sourceMappingURL=Historical.fe19b26f.js.map