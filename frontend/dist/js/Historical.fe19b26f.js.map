{"version":3,"sources":["webpack:///./src/views/process/historical.vue?5309","webpack:///src/views/process/historical.vue","webpack:///./src/views/process/historical.vue?6da2","webpack:///./src/views/process/historical.vue","webpack:///./src/views/process/historical.vue?56b7","webpack:///./src/assets/imgs/moren.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","backOn","onRefresh","model","value","callback","$$v","refreshing","expression","finished","text","onLoad","loading","_l","item","key","$event","lookMessage","style","color","fontSize","_v","_s","username","apply_type","directives","name","rawName","staticRenderFns","component","module","exports"],"mappings":"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","file":"js/Historical.fe19b26f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"historical\"},[_c('div',{staticClass:\"head\"},[_c('van-nav-bar',{attrs:{\"title\":\"我的申请\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.backOn}})],1),_c('div',[_c('van-pull-refresh',{staticClass:\"content\",on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.refreshing),callback:function ($$v) {_vm.refreshing=$$v},expression:\"refreshing\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":_vm.text},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.msgArr),function(item){return _c('div',{key:item['leave_id'],staticClass:\"conters\",on:{\"click\":function($event){return _vm.lookMessage(item)}}},[_c('div',{staticClass:\"img\"},[_c('i',[_c('img',{attrs:{\"src\":item['user_head_url'],\"alt\":\"\",\"v-lazy\":item['user_head_url']}})])]),_c('div',{staticClass:\"conter\"},[_c('div',{staticClass:\"conterLeft\"},[_c('p',[_c('span',{style:({ color:'#00ff00', fontSize:'1rem'})},[_vm._v(\"·\")]),_vm._v(\" \"+_vm._s(item.username)+\" \")]),_c('p',{staticClass:\"partConter\"},[_c('span',{style:({ color:'#00ff00'})},[_vm._v(\"·\")]),_vm._v(\" 请假类型：\"+_vm._s(item.apply_type)+\" \")]),_c('p',{staticClass:\"partConter\"},[_c('span',{style:({ color:'#00ff00'})},[_vm._v(\"·\")]),_vm._v(\" 申请时间：\"+_vm._s(item['apply_time'])+\" \")]),_c('p',{staticClass:\"partConter\"},[_c('span',{style:({ color:'#00ff00'})},[_vm._v(\"·\")]),_vm._v(\" \"+_vm._s(item['start_time'])+\" / \"+_vm._s(item['end_time'])+\" \")])]),_c('div',{staticClass:\"conterRight\"},[(item['audit_state'] == '通过')?_c('div',{staticClass:\"read\"},[_vm._v(_vm._s(item['audit_state'])+\" \")]):(item['audit_state'] == '未通过')?_c('div',{staticClass:\"noread\"},[_vm._v(_vm._s(item['audit_state'])+\" \")]):_c('div',{staticClass:\"child\"},[_vm._v(_vm._s(item['audit_state'])+\" \")])])])])}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.Noleave),expression:\"Noleave\"}],staticClass:\"nocentent\"},[_vm._v(\" 当前没有假事 \")])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"historical\">\n    \n        <div class=\"head\">\n            <van-nav-bar title=\"我的申请\" left-text=\"返回\" @click-left=\"backOn\" left-arrow>\n            </van-nav-bar>\n        </div>\n\n        <!-- <div v-if=\"msgArr.length > 0\"> -->\n\n         <div>\n                <van-pull-refresh class=\"content\" v-model=\"refreshing\" @refresh=\"onRefresh\" >\n                <van-list\n                    v-model=\"loading\"\n                    :finished=\"finished\"\n                    :finished-text=\"text\"\n                    @load=\"onLoad\"\n                >\n\n                    <div class=\"conters\" v-for=\"(item) in msgArr\" :key=\"item['leave_id']\" @click=\"lookMessage(item)\">\n                \n                        <div class=\"img\">\n                            <i>\n                                <img :src=\"item['user_head_url']\" alt=\"\" :v-lazy=\"item['user_head_url']\">\n                            </i>\n                        </div>\n                        \n                        <div class=\"conter\">\n                            <div class=\"conterLeft\">\n\n                                <p>\n                                    <span  :style=\"{ color:'#00ff00', fontSize:'1rem'}\">·</span> \n                                    {{ item.username }}             \n                                </p>\n\n                                <p class=\"partConter\">\n                                    <span  :style=\"{ color:'#00ff00'}\">·</span> \n                                    请假类型：{{ item.apply_type }}\n                                </p>\n\n                                 <p class=\"partConter\">\n                                    <span  :style=\"{ color:'#00ff00'}\">·</span> \n                                    申请时间：{{ item['apply_time'] }}\n                                </p>\n\n                                <p class=\"partConter\">\n                                    <span  :style=\"{ color:'#00ff00'}\">·</span> \n                                    {{ item['start_time'] }} / {{ item['end_time'] }} \n                                </p>\n\n                            </div>\n\n                            <div class=\"conterRight\">\n                                <div class=\"read\"  v-if=\"item['audit_state'] == '通过'\">{{ item['audit_state'] }} </div>\n                                <div class=\"noread\" v-else-if=\"item['audit_state'] == '未通过'\">{{ item['audit_state'] }} </div>\n                                <div class=\"child\" v-else>{{ item['audit_state'] }} </div>\n                            </div>\n                        </div>\n                    </div>\n                   \n                </van-list>\n\n                <div class=\"nocentent\" v-show=\"Noleave\">\n                    当前没有假事\n                </div>\n            </van-pull-refresh>\n         </div>\n\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'historical',\n    data () {\n        return {\n            loading: false,    // 加载数据  \n            finished: false,   //数据完全加载完\n            refreshing: false,\n            msgArr: [],\n            page:'',         //页数\n            imgs:require(\"../../assets/imgs/moren.png\"),  //默认头像\n            Noleave:false,\n            text:\"已经到底了\"\n        }\n    },\n\n    mounted () {\n\n        //更新当前页数\n        this.page = this.page || 1;    \n    },\n\n    methods: {\n\n         //我的请假详情\n        lookMessage (msgId) {\n            localStorage.setItem('data',JSON.stringify(msgId))\n            this.$router.push({\n                path:'/myhistorical',\n            })\n        },\n      \n        // 时间戳转换成时间\n        timestampToTime (time) {\n            let date = new Date(time) //时间戳为10位需*1000，时间戳为13位的话不需乘1000\n            let Y = date.getFullYear() + '-'\n            let M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-'\n            let D = (date.getDate()+1 < 10 ? '0'+ date.getDate() : date.getDate()) + ' '\n           \n            return Y+M+D\n            // console.log(timestampToTime (1533293827000))\n        },\n\n\n        //无线加载数据更新\n        onLoad() {\n            \n            this.$axios.get({\n                url: '/leave/myleaves',\n                params:{\n                    page:this.page,\n                }\n            }).then(\n                    res => {\n                        console.log(res);\n\n                        if (res && res.code == -405) {\n                            \n                            this.Noleave = true;\n                            this.text = '';\n                        }\n                        \n                        //下拉加载\n                        if (this.refreshing) {\n                            this.msgArr = [];\n                            this.refreshing = false;\n                        }\n                        \n                        //渲染数据\n                        if (res && res.data) {\n                            for (let i = 0; i < res.data.length; i++) {\n                                //换算时间\n                                res.data[i]['apply_time'] = this.timestampToTime(res.data[i]['apply_time']);\n\n                                //设置头像\n                                if (res.data[i]['user_head_url'] == null || res.data[i]['user_head_url'] == '') {\n                                    res.data[i]['user_head_url'] = this.imgs;\n                                } else {\n                                    res.data[i]['user_head_url'] = require('../../config').baseURL + '/imgs/temporary/' + res.data[i]['user_head_url'];\n                                }\n\n                                //设置状态\n                                 if (res.data[i].audit_state == 0) {\n                                    res.data[i].audit_state = '未审核';\n                                } else if (res.data[i].audit_state == 1) {\n                                    res.data[i].audit_state = '通过';\n                                } else if (res.data[i].audit_state == 2) {\n                                    res.data[i].audit_state = '未通过';\n                                }\n                                \n\n                                //开始时间\n                                res.data[i].start_time = this.timestampToTime(res.data[i].start_time); \n                                //结束时间\n                                res.data[i].end_time = this.timestampToTime(res.data[i].end_time);\n\n\n                                this.msgArr.push(res.data[i]);\n                                this.msgArr = this.msgArr.reverse();\n                            }\n\n                            \n                        }\n\n                        //加载完成\n                        this.loading = false;\n\n                        //当前页数\n                        this.page += 1;\n\n                        //数据全部加载完成\n                        if (this.page > res.pagetotle) {\n                            this.finished = true;\n                        } else if (!res.pagetotle) {\n                            this.finished = true;\n                        }\n                        \n                    }\n                )\n        },\n            \n        onRefresh() {\n\n            // 清空列表数据\n            this.finished = false;\n\n            //page重载为一\n            this.page = 1;\n\n            // 重新加载数据\n            this.onLoad();\n           \n            // 将 loading 设置为 true，表示处于加载状态\n            this.loading = true;\n           \n        },\n\n        backOn () {\n          this.$router.push({\n            path:\"/process\"\n          })\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"less\">\n\n   .historical {\n       height: 100vh;\n       overflow-y: scroll;\n       overflow-x: hidden;\n       background-size: cover;\n   }\n\n\n\n    .conters {\n        width: 90%;\n        height: auto;\n        display: flex;\n        align-content: stretch;\n        background-color: #fff;\n        // border: 1px solid rgb(196, 195, 195);\n        border-radius: 5px;\n        margin:1vh auto;\n\n        .img {\n            flex: 2;\n            background-color: #fff;\n            border-radius: 5px;\n            i {\n                display: block;\n                width: 3rem;\n                height: 3rem;\n                border-radius: 3rem;\n                overflow: hidden;\n                background-size: 3rem 3rem;\n                border:none;\n                margin:calc((100% - 1rem) / 2) auto;\n                img {\n                    width:3rem;\n                    height:3rem;\n                }\n            }\n        }\n        .conter {\n            flex: 8;\n            .partConter {\n                font-size: 0.8rem;\n                color: #aaa;\n                display: -webkit-box;\n                -webkit-box-orient: vertical;\n                -webkit-line-clamp: 1;\n            }\n\n            p {\n                margin: 0.4rem 5px;\n            }\n        }\n\n        .conterLeft {\n            float: left;\n            width: 65%;\n            height: 6rem;\n            overflow: hidden;\n        }\n\n        .conterRight {\n            float: right;\n            width: 35%;\n            height: 100%;\n            \n            //待审核\n            .child {\n                float: right;\n                text-align: center;\n                width: 100%;\n                height:100%;\n                line-height: 6rem;\n                color: rgb(211, 192, 20);\n                font-weight: bold;\n            }\n\n            //已读\n            .read {\n                width: 100%;\n                height: 100%;\n                text-align: center;\n                background: #fff;\n                line-height: 6rem;\n                font-weight: bold;\n                color:rgb(46, 219, 31);\n            }\n\n            .noread{\n                width: 100%;\n                height: 100%;\n                text-align: center;\n                background: #fff;\n                line-height: 6rem;\n                font-weight: bold;\n                color:rgb(177, 62, 27);\n            }\n        }\n    }\n\n    .messageNull {\n        margin: 3rem auto;\n        width: 80%;\n        text-align: center;\n        color: #787887;\n    }\n    .content {\n        height: auto;\n    }\n\n    .nocentent{\n        width: 100%;\n        height: 10vh;\n        color: #000;\n        line-height: 10vh;\n        text-align: center;\n        font-weight: bold;\n    }\n/deep/ .van-icon-arrow-left {\n    color:#000;\n    font-size:1rem;\n}\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./historical.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./historical.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./historical.vue?vue&type=template&id=5b789cc5&scoped=true&\"\nimport script from \"./historical.vue?vue&type=script&lang=js&\"\nexport * from \"./historical.vue?vue&type=script&lang=js&\"\nimport style0 from \"./historical.vue?vue&type=style&index=0&id=5b789cc5&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b789cc5\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./historical.vue?vue&type=style&index=0&id=5b789cc5&scoped=true&lang=less&\"","module.exports = __webpack_public_path__ + \"img/moren.5c56d74a.png\";"],"sourceRoot":""}