(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["User"],{"16aa":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Choicecontacts"},[s("div",{staticClass:"head"},[s("van-nav-bar",{staticClass:"usertitle",attrs:{fixed:"",title:"用户","left-text":"返回","right-text":"添加","left-arrow":""},on:{"click-left":e.backon,"click-right":e.onClickRight}})],1),s("van-search",{staticClass:"sear",attrs:{placeholder:"请输入搜索关键词"},on:{click:e.queryClick,search:e.queryClick,cancel:e.onCancel,blur:e.queryClick},model:{value:e.sms,callback:function(t){e.sms=t},expression:"sms"}}),s("div",{staticClass:"body"},[s("van-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.everyoneArr,(function(t,a){return s("van-collapse-item",{key:a,ref:a,refInFor:!0,attrs:{title:a,name:a}},[""==t?s("van-checkbox-group",{model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},[s("span",{staticStyle:{"font-size":"0.5rem"}},[e._v("该部门还没有员工哦")])]):e._e(),s("van-checkbox-group",{model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},[s("van-cell-group",e._l(t,(function(t,r){return s("van-swipe-cell",{key:r,scopedSlots:e._u([{key:"right",fn:function(){return["-1"==e.everyoneArr[a][r].open_status?s("van-button",{staticClass:"delete-button",attrs:{square:"",text:"解冻",type:"danger"},on:{click:function(s){return e.freezes(t["user_id"],"1",a,r)}}}):s("van-button",{staticClass:"delete-button",attrs:{square:"",text:"冻结",type:"danger"},on:{click:function(s){return e.freezes(t["user_id"],"-1",a,r)}}}),s("van-button",{staticClass:"redice",attrs:{square:"",text:"重置密码",type:"danger"},on:{click:function(s){return e.replece(t["user_id"])}}})]},proxy:!0}],null,!0)},[s("van-cell",{attrs:{clickable:"",title:" "+t["username"]},on:{click:function(s){return e.seeMsg(t["user_id"])}}})],1)})),1)],1)],1)})),1)],1),s("van-popup",{style:{height:"7%"},attrs:{position:"top"},model:{value:e.showQuery,callback:function(t){e.showQuery=t},expression:"showQuery"}})],1)},r=[],o={name:"Choicecontacts",data(){return{everyoneArr:[],checkedVal:[],activeNames:[],result:[],showQuery:!1,checkAll:!1,sms:"",nowLoginId:"",value:"",state:!0,frezz:"冻结",blog:!1}},mounted(){this.Toast.loading({message:"",forbidClick:!0,duration:0}),this.$axios.get({url:"message/maillist"}).then(e=>{e&&this.handleData(e),this.Toast.clear()})},methods:{querys(){this.showQuery=!0},queryClick(){let e=this.sms.trim();if(""==e)return"搜索信息不能为空";this.$axios.post({url:"message/querylist",data:{msg:e}}).then(e=>{if(0==e.code){let t={};for(let s=0;s<e.data.length;s++)void 0!=t[e.data[s].name]||(t[e.data[s].name]=[]),t[e.data[s].name].push(e.data[s]);this.everyoneArr=t,console.log(this.$refs[t[0]]),this.sms="",this.showQuery=!1,this.state=!0}else this.Toast(e.message),this.sms="",this.showQuery=!1})},onClickRight(){this.$router.push({path:"/about/us/test"})},freezes(e,t,s,a){this.$axios.post({url:"user/freeze",data:{uid:JSON.stringify([e]),option:t}}).then(e=>{e&&e.code&&("0"==e.code?(this.Toast.success("成功"),this.everyoneArr[s][a].open_status="1"==t?"1":"-1",console.log(this.everyoneArr[s][a].open_status)):this.Toast.fail("失败")),console.log(e)})},replece(e){console.log(e),this.Dialog.confirm({title:"重置密码",message:"是否确认重置密码？"}).then(()=>{this.$axios.post({url:"/user/repwd",data:{uid:e}}).then(e=>{e&&"0"==e.code?this.Toast.success("重置密码成功"):this.Toast.fail("重置密码失败")})}).catch(()=>{this.Toast({message:"已取消",position:"bottom"})})},seeMsg(e){this.$router.push("/about/user/alter/"+e),console.log(e)},onSearch(e){},onCancel(){this.Toast("取消")},backon(){this.$router.push("/about")},handleData({dataArr:e,listArr:t}){let s={};if(t&&t.length)for(let a=0;a<t.length;a++){s[t[a]["name"]]=[];for(let r=0;r<e.length;r++)t[a]["department_id"]==e[r]["department_id"]&&s[t[a]["name"]].push(e[r])}this.everyoneArr=s}}},n=o,i=(s("199c5"),s("2877")),l=Object(i["a"])(n,a,r,!1,null,"4c6406c0",null);t["default"]=l.exports},"199c5":function(e,t,s){"use strict";s("ebe0")},ebe0:function(e,t,s){}}]);
//# sourceMappingURL=User.3512689f.js.map