{"version":3,"sources":["webpack:///./src/views/workdiary/Workhistory.vue?cae9","webpack:///src/views/workdiary/Workhistory.vue","webpack:///./src/views/workdiary/Workhistory.vue?bf94","webpack:///./src/views/workdiary/Workhistory.vue","webpack:///./src/views/workdiary/Workhistory.vue?7746","webpack:///./src/assets/imgs/moren.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","backOn","onRefresh","model","value","callback","$$v","refreshing","expression","finished","text","onLoad","loading","_l","item","key","$event","lookworkapproval","_v","_s","username","directives","name","rawName","staticRenderFns","msgArr","page","imgs","Noleave","methods","time","date","Date","Y","getFullYear","M","D","$axios","$router","push","path","msgId","console","log","localStorage","setItem","JSON","stringify","component","module","exports"],"mappings":"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","file":"js/Workhistory.67046e94.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"workhistory\"},[_c('div',{staticClass:\"head\"},[_c('van-nav-bar',{attrs:{\"title\":\"历史日志\",\"fixed\":\"\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.backOn}})],1),_c('div',{staticClass:\"contents\"},[_c('van-pull-refresh',{staticClass:\"content\",on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.refreshing),callback:function ($$v) {_vm.refreshing=$$v},expression:\"refreshing\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":_vm.text},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.msgArr),function(item){return _c('div',{key:item['leave_id'],staticClass:\"conters\",on:{\"click\":function($event){return _vm.lookworkapproval(item)}}},[_c('div',{staticClass:\"img\"},[_c('i',[_c('img',{attrs:{\"src\":item['user_head_url'],\"alt\":\"\",\"v-lazy\":item['user_head_url']}})])]),_c('div',{staticClass:\"conter\"},[_c('div',{staticClass:\"conterLeft\"},[_c('p',{staticClass:\"dutym\"},[_c('span',{staticClass:\"dutyperson\"},[_vm._v(\"负责人：\")]),_c('span',{staticClass:\"duty\"},[_vm._v(\" \"+_vm._s(item.username)+\" \")])]),_c('p',{staticClass:\"logcontent\"},[_c('span',[_vm._v(\"内容：\")]),_c('span',[_vm._v(\" \"+_vm._s(item[\"log_content\"])+\" \")])]),_c('p',{staticClass:\"partConter\"},[_c('span',[_vm._v(\"提交时间：\")]),_c('span',[_vm._v(\" \"+_vm._s(item[\"log_time\"])+\" \")])])]),_c('div',{staticClass:\"conterRight\"},[(item['log_read_state'] == '已批阅')?_c('div',{staticClass:\"read\"},[_vm._v(\" \"+_vm._s(item[\"log_read_state\"])+\" \")]):_c('div',{staticClass:\"child\"},[_vm._v(_vm._s(item[\"log_read_state\"]))])])])])}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.Noleave),expression:\"Noleave\"}],staticClass:\"nocentent\"},[_vm._v(\"暂无提交日志\")])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n  <div class=\"workhistory\">\n    <div class=\"head\">\n      <van-nav-bar\n        title=\"历史日志\"\n        fixed\n        left-text=\"返回\"\n        @click-left=\"backOn\"\n        left-arrow\n      >\n      </van-nav-bar>\n    </div>\n\n    <!-- <div v-if=\"msgArr.length > 0\"> -->\n\n    <div class=\"contents\">\n      <van-pull-refresh\n        class=\"content\"\n        v-model=\"refreshing\"\n        @refresh=\"onRefresh\"\n      >\n        <van-list\n          v-model=\"loading\"\n          :finished=\"finished\"\n          :finished-text=\"text\"\n          @load=\"onLoad\"\n        >\n          <div\n            class=\"conters\"\n            v-for=\"item in msgArr\"\n            :key=\"item['leave_id']\"\n            @click=\"lookworkapproval(item)\"\n          >\n            <div class=\"img\">\n              <i>\n                <img\n                  :src=\"item['user_head_url']\"\n                  alt=\"\"\n                  :v-lazy=\"item['user_head_url']\"\n                />\n              </i>\n            </div>\n\n            <div class=\"conter\">\n              <div class=\"conterLeft\">\n                <p class=\"dutym\">\n                  <span class=\"dutyperson\">负责人：</span>\n                  <span class=\"duty\"> {{ item.username }} </span>\n                </p>\n\n                <p class=\"logcontent\">\n                  <span>内容：</span>\n                  <span> {{ item[\"log_content\"] }} </span>\n                </p>\n\n                <p class=\"partConter\">\n                  <span>提交时间：</span>\n                  <span> {{ item[\"log_time\"] }} </span>\n                </p>\n              </div>\n\n              <div class=\"conterRight\">\n                <div class=\"read\" v-if=\"item['log_read_state'] == '已批阅'\">\n                  {{ item[\"log_read_state\"] }}\n                </div>\n\n                <div class=\"child\" v-else>{{ item[\"log_read_state\"] }}</div>\n              </div>\n            </div>\n          </div>\n        </van-list>\n\n        <div class=\"nocentent\" v-show=\"Noleave\">暂无提交日志</div>\n      </van-pull-refresh>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Workhistory\",\n  data() {\n    return {\n      loading: false, // 加载数据\n      finished: false, //数据完全加载完\n      refreshing: false,\n      msgArr: [],\n      page: \"\", //页数\n      imgs: require(\"../../assets/imgs/moren.png\"), //默认头像\n      Noleave: false,\n      text: \"已经到底了\",\n    };\n  },\n\n  mounted() {\n    //更新当前页数\n    this.page = this.page || 1;\n  },\n\n  methods: {\n    // 时间戳转换成时间\n    timestampToTime(time) {\n      let date = new Date(time); //时间戳为10位需*1000，时间戳为13位的话不需乘1000\n      let Y = date.getFullYear() + \"-\";\n      let M =\n        (date.getMonth() + 1 < 10\n          ? \"0\" + (date.getMonth() + 1)\n          : date.getMonth() + 1) + \"-\";\n      let D =\n        (date.getDate() + 1 < 10 ? \"0\" + date.getDate() : date.getDate()) + \" \";\n\n      return Y + M + D;\n      // console.log(timestampToTime (1533293827000))\n    },\n\n    //无线加载数据更新\n    onLoad() {\n      this.$axios\n        .get({\n          url: \"/worklog/historyworklog\",\n          params: {\n            page: this.page,\n          },\n        })\n        .then((res) => {\n          // console.log(res);\n\n          if (res && res.code == -405) {\n            this.Noleave = true;\n            this.text = \"\";\n          }\n\n          //下拉加载\n          if (this.refreshing) {\n            this.msgArr = [];\n            this.refreshing = false;\n          }\n\n          //渲染数据\n          if (res && res.data) {\n            for (let i = 0; i < res.data.length; i++) {\n              //换算时间\n              res.data[i][\"log_time\"] = this.timestampToTime(\n                res.data[i][\"log_time\"]\n              );\n\n              //设置头像\n              if (\n                res.data[i][\"user_head_url\"] == null ||\n                res.data[i][\"user_head_url\"] == \"\"\n              ) {\n                res.data[i][\"user_head_url\"] = this.imgs;\n              } else {\n                res.data[i][\"user_head_url\"] =\n                  require(\"../../config\").baseURL +\n                  \"/imgs/temporary/\" +\n                  res.data[i][\"user_head_url\"];\n              }\n\n              //设置状态\n              if (res.data[i].log_read_state == 0) {\n                res.data[i].log_read_state = \"未批阅\";\n              } else {\n                res.data[i].log_read_state = \"已批阅\";\n              }\n\n              this.msgArr.push(res.data[i]);\n              this.msgArr = this.msgArr.reverse();\n            }\n          }\n\n          //加载完成\n          this.loading = false;\n\n          //当前页数\n          this.page += 1;\n\n          //数据全部加载完成\n          // console.log(this.page , res.pageOverall)\n          if (this.page > res.pageOverall) {\n            this.finished = true;\n          } else if (!res.pageOverall) {\n            this.finished = true;\n          }\n        });\n    },\n\n    onRefresh() {\n      // 清空列表数据\n      this.finished = false;\n\n      //page重载为一\n      this.page = 1;\n\n      // 重新加载数据\n      this.onLoad();\n\n      // 将 loading 设置为 true，表示处于加载状态\n      this.loading = true;\n    },\n\n    backOn() {\n      this.$router.push({\n        path: \"/workdiary\",\n      });\n    },\n\n    lookworkapproval(msgId) {\n      console.log(msgId);\n      localStorage.setItem(\"data\", JSON.stringify(msgId));\n      this.$router.push({\n        path: \"/myworkdetails\",\n      });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.contents {\n  padding-top: 7vh;\n  width: 100vw;\n  height: 100vh;\n  overflow-y: scroll;\n  overflow-x: hidden;\n}\n\n.dutyperson {\n  font-size: 1rem;\n}\n\n.conters {\n  width: 90%;\n  height: auto;\n  display: flex;\n  align-content: stretch;\n  background-color: #fff;\n  // border: 1px solid rgb(196, 195, 195);\n  border-radius: 0.1rem;\n  margin: 0.1rem auto;\n\n  .img {\n    flex: 2;\n    background-color: #fff;\n    border-radius: 2rem;\n    i {\n      display: block;\n      width: 3rem;\n      height: 3rem;\n      border-radius: 3rem;\n      overflow: hidden;\n      background-size: 3rem 3rem;\n      border: none;\n      margin: calc((100% - 1rem) / 2) auto;\n      img {\n        width: 3rem;\n        height: 3rem;\n      }\n    }\n  }\n    .dutym {\n        padding-top: 0.3rem;\n    }\n\n  .conter {\n    flex: 8;\n    .partConter {\n      font-size: 0.7rem;\n      padding-top: 0.2rem;\n      color: #aaa;\n      display: -webkit-box;\n      -webkit-box-orient: vertical;\n      -webkit-line-clamp: 1;\n    }\n\n    .logcontent {\n      width: 50vw;\n      padding-top: 0.3rem;\n      color: #aaa;\n      overflow: hidden;\n      display: -webkit-box;\n      -webkit-line-clamp: 1;\n      -webkit-box-orient: vertical;\n      font-size: 1rem;\n    }\n\n    p {\n      margin: 0.4rem 5px;\n    }\n  }\n\n  .conterLeft {\n    float: left;\n    width: 65%;\n    height: 6rem;\n    overflow: hidden;\n  }\n\n  .conterRight {\n    float: right;\n    width: 35%;\n    height: 100%;\n\n    //待审核\n    .child {\n      float: right;\n      text-align: center;\n      width: 100%;\n      height: 100%;\n      line-height: 6rem;\n      color: #f2cc8f;\n      font-weight: bold;\n    }\n\n    //已读\n    .read {\n      width: 100%;\n      height: 100%;\n      text-align: center;\n      background: #fff;\n      line-height: 6rem;\n      font-weight: bold;\n      color: #52b788;\n    }\n\n    .noread {\n      width: 100%;\n      height: 100%;\n      text-align: center;\n      background: #fff;\n      line-height: 6rem;\n      font-weight: bold;\n      color: rgb(177, 62, 27);\n    }\n  }\n}\n\n.messageNull {\n  margin: 3rem auto;\n  width: 80%;\n  text-align: center;\n  color: #787887;\n}\n\n// .content {\n//     height: 100vh;\n\n// }\n\n// /deep/.van-pull-refresh{\n//         overflow: none;\n//\n.nocentent {\n  width: 100%;\n  height: 10vh;\n  color: #000;\n  line-height: 10vh;\n  text-align: center;\n  font-weight: bold;\n}\n\n/deep/ .van-icon-arrow-left {\n  color: #000;\n  font-size: 1rem;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Workhistory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Workhistory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Workhistory.vue?vue&type=template&id=c5aebeb0&scoped=true&\"\nimport script from \"./Workhistory.vue?vue&type=script&lang=js&\"\nexport * from \"./Workhistory.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Workhistory.vue?vue&type=style&index=0&id=c5aebeb0&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c5aebeb0\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Workhistory.vue?vue&type=style&index=0&id=c5aebeb0&scoped=true&lang=less&\"","module.exports = __webpack_public_path__ + \"img/moren.5c56d74a.png\";"],"sourceRoot":""}