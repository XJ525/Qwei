(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Workmessagesend"],{"5ca5":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"noticesend"},[s("div",{staticClass:"head"},[s("van-nav-bar",{attrs:{title:"发送工作通知","left-text":"返回","left-arrow":""},on:{"click-left":function(e){return t.$router.replace("/")}}})],1),s("div",{staticClass:"noticeMain"},[s("div",{staticClass:"mainTitle",on:{click:t.choicecontacts}},[t._m(0),s("p",{staticClass:"select"},[s("van-cell-group",[s("van-field",{attrs:{label:"已选择：",readonly:""},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}})],1)],1)]),s("div",[s("div",{staticClass:"texts"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textareas,expression:"textareas"}],staticClass:"texta",attrs:{name:"texta",cols:"30",rows:"10",placeholder:"编辑工作通知的内容"},domProps:{value:t.textareas},on:{input:function(e){e.target.composing||(t.textareas=e.target.value)}}}),s("p",{staticClass:"btn"},[s("van-button",{staticClass:"confirm",attrs:{type:"info"},on:{click:t.confirms}},[t._v("确认发送")]),s("van-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:t.cancel}},[t._v("取消发送")])],1)])])])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("span",{staticClass:"left"},[t._v("请选择您要发送的人")]),s("span",{staticClass:"right"},[t._v(">")])])}],c={name:"Workmessagesend",data(){return{textareas:"",selectData:[],select:""}},mounted(){void 0!=this.$route.query.data&&this.selectrander(this.$route.query.data)},methods:{cancel(){this.Dialog.confirm({title:"确定取消？",message:"取消发布将失去全部已编辑内容"}).then(()=>{this.$router.push("/")})},confirms(){this.Dialog.confirm({title:"确定发布？"}).then(()=>{""!=this.textareas.trim()?this.textareas.length>500?this.Toast.fail("字符长度超出500"):this.selectData.length>100?this.Toast.fail("至少选择1人"):this.$axios.post({url:"workmessage/sendmsg",data:{content:this.textareas,userArr:this.selectData}}).then(t=>{0==t.code?(this.Toast.success("成功发布"),this.$router.replace("/about")):this.Toast.fail(t.message)}):this.Toast.fail("内容不能为空")})},choicecontacts(){this.$router.push("/workmessage/workmessagesend/workmsgceco")},selectrander(t){t=JSON.parse(t);for(let e=0;e<t.length;e++)this.select+=""==this.select?t[e].username:", "+t[e].username,this.selectData.push(t[e]["user_id"])}}},n=c,r=(s("679c"),s("2877")),l=Object(r["a"])(n,a,i,!1,null,"503351dd",null);e["default"]=l.exports},"679c":function(t,e,s){"use strict";s("b295")},b295:function(t,e,s){}}]);
//# sourceMappingURL=Workmessagesend.23e2fda2.js.map