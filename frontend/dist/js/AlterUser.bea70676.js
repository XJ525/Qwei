(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AlterUser"],{1761:function(e,a,t){"use strict";t("7abe")},"7abe":function(e,a,t){},"7e3ea":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"seemaillist"},[t("div",{staticClass:"head"},[t("van-nav-bar",{staticClass:"nav",attrs:{title:e.userData.username,"left-text":"返回","left-arrow":""},on:{"click-left":e.backon}})],1),t("van-cell-group",[t("van-field",{attrs:{label:"姓名",placeholder:"请输入用户名",readonly:""},model:{value:e.userData.username,callback:function(a){e.$set(e.userData,"username",a)},expression:"userData.username"}}),t("van-field",{attrs:{type:"tel",label:"手机号",readonly:""},model:{value:e.userData.phone,callback:function(a){e.$set(e.userData,"phone",a)},expression:"userData.phone"}})],1),t("van-field",{attrs:{label:"性别",readonly:""},model:{value:e.sex,callback:function(a){e.sex=a},expression:"sex"}}),t("van-field",{attrs:{readonly:"",clickable:"",name:"picker",value:e.value,label:"选择角色",placeholder:"点击选择角色"},on:{click:function(a){e.showPicker=!0}},model:{value:e.role_name,callback:function(a){e.role_name=a},expression:"role_name"}}),t("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(a){e.showPicker=a},expression:"showPicker"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.columns},on:{confirm:e.onConfirm,cancel:function(a){e.showPicker=!1}}})],1),t("van-field",{attrs:{readonly:"",clickable:"",name:"picker",value:e.values,label:"选择部门",placeholder:"点击选择部门"},on:{click:function(a){e.showPickers=!0}},model:{value:e.depart_name,callback:function(a){e.depart_name=a},expression:"depart_name"}}),t("van-popup",{attrs:{position:"bottom"},model:{value:e.showPickers,callback:function(a){e.showPickers=a},expression:"showPickers"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.list},on:{confirm:e.onConfirms,cancels:function(a){e.showPickers=!1}}})],1),t("van-cell-group",[t("van-field",{attrs:{label:"邮箱",placeholder:"该用户未填写邮箱",readonly:""},model:{value:e.userData.email,callback:function(a){e.$set(e.userData,"email",a)},expression:"userData.email"}})],1),t("van-cell-group",[t("van-field",{attrs:{label:"入职时间",readonly:""},model:{value:e.times,callback:function(a){e.times=a},expression:"times"}})],1),t("div",{staticClass:"email other"},[t("van-collapse",{staticClass:"otherData",attrs:{accordion:""},model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[t("van-collapse-item",{attrs:{title:"其他资料",name:"1"}},[t("p",[e._v(" 昵称： "),null!=e.userData.signature?t("span",[e._v(" "+e._s(e.userData.nickname)+" ")]):null==e.userData.signature?t("span",{staticClass:"empty"}):e._e()]),t("p",[e._v(" 个性签名： "),null!=e.userData.signature?t("span",[e._v(" "+e._s(e.userData.signature)+" ")]):null==e.userData.signature?t("span",{staticClass:"empty"}):e._e()])])],1)],1)],1)},i=[],o={name:"SeeMaillist",data(){return{userData:{},activeName:["1"],showPicker:!1,columns:[],list:[],value:"",columns_role_id:{},sex:"",role_name:"",times:"",showPickers:!1,values:"",depart_id:"",depart_name:""}},mounted(){this.rander(this.$route.params.id)},methods:{onConfirm(e){this.Toast.loading({message:"修改中...",forbidClick:!0,duration:0}),this.role_name=e,this.showPicker=!1;let a="";for(let t in this.columns_role_id)this.columns_role_id[t]==e&&(a=t);this.$axios.post({url:"/message/alteruserrole",data:{msgId:this.$route.params.id,roleId:a}}).then(e=>{e&&"0"==e.code?(this.Toast.success("修改角色成功"),setTimeout(()=>{this.$router.push({path:"/about/user"})},1e3)):this.Toast({message:"修改失败",position:"bottom"})}),this.Toast.clear()},onConfirms(e){this.Toast.loading({message:"修改中...",forbidClick:!0,duration:0}),this.values=e,this.showPickers=!1;for(let a in this.list_department_id)this.list_department_id[a]==e&&(this.depart_name=e,this.depart_id=a);this.$axios.post({url:"/message/alteruserpart",data:{msgId:this.$route.params.id,departId:this.depart_id}}).then(e=>{e&&"0"==e.code?this.Toast.success("修改部门成功"):this.Toast({message:"修改失败",position:"bottom"})}),this.Toast.clear()},rander(e){this.Toast.loading({message:"",forbidClick:!0,duration:0}),this.$axios.get({url:"/role/select_role"}).then(e=>{e instanceof Array&&e.forEach(e=>{this.columns.push(e.role_name),this.columns_role_id[e.roleid]=e.role_name})}),this.$axios.post({url:"/message/usersmssage",data:{msgId:e}}).then(e=>{console.log("mesg",e),this.Toast.clear(),e&&e.rest[0]&&(this.times=this.timestampToTime(e.rest[0]["induction_time"]),this.userData=e.rest[0],1==e.rest[0].sex?this.sex="男":this.sex="女",this.depart_name=e.rest[0].name,this.role_name=e.rest[0].role_name)}),this.$axios.get({url:"/department/select"}).then(e=>{let a=[],t={};e.forEach(e=>{a.push(e.name),t[e.department_id]=e.name}),this.list=a,this.list_department_id=t})},timestampToTime(e){let a=new Date(e),t=a.getFullYear()+"年",s=(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"月",i=(a.getDate()+1<10?"0"+a.getDate():a.getDate())+"日";return t+s+i},backon(){this.$router.push("/about/user")}}},l=o,r=(t("1761"),t("2877")),n=Object(r["a"])(l,s,i,!1,null,"96565f14",null);a["default"]=n.exports}}]);
//# sourceMappingURL=AlterUser.bea70676.js.map