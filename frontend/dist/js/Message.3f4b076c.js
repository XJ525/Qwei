(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Message"],{"0944":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"message"},[e("div",{staticClass:"head"},[e("van-nav-bar",{staticClass:"title",attrs:{title:"站内信","left-text":"返回","right-text":"历史记录",fixed:"","left-arrow":""},on:{"click-left":function(s){return t.$router.replace("/")},"click-right":t.myhistory}})],1),t.msgArr.length>0?e("div",[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.msgArr,(function(s){return e("div",{key:s["message_id"],staticClass:"conters",on:{click:function(e){return t.lookMessage(s["message_id"])}}},[e("div",{staticClass:"img"},[e("i",[e("img",{attrs:{src:""+s["user_head_url"],alt:""}})])]),e("div",{staticClass:"conter"},[e("div",{staticClass:"conterLeft"},[e("p",[e("span",{style:{color:"#00ff00"}},[t._v("·")]),t._v(" "+t._s(s.username)+" ")]),e("p",{staticClass:"partConter"},[t._v(" "+t._s(s.content)+" ")])]),e("div",{staticClass:"conterRight"},[0==s["read_state"]?e("div",[e("div",{staticClass:"child"})]):e("div",[e("div",{staticClass:"read"})]),e("div",{staticClass:"conterRightTime"},[t._v(" "+t._s(s["message_time"])+" ")])])])])})),0)],1):e("div",{staticClass:"messageNull"},[t._v(" 没有消息记录 ")]),e("van-button",{staticClass:"issues createFile",attrs:{icon:"plus",type:"info",round:!0},on:{click:t.createFile}})],1)},i=[],r={name:"Maessage",data(){return{loading:!1,finished:!0,msgArr:[],listTotal:""}},mounted(){this.rander()},methods:{rander(){this.Toast.loading({message:"",forbidClick:!0,duration:0}),this.$axios.get({url:"message/recemsg"}).then(t=>{if(0==t.code)for(let s=0;s<t.data.length;s++)t.data[s]["message_time"]=this.timestampToTime(t.data[s]["message_time"]),t.data[s]["user_head_url"]=e("f121").baseURL+"/imgs/temporary/"+t.data[s]["user_head_url"],this.msgArr=t.data.reverse(),this.listTotal=t.list;else console.log(t.message);this.msgArr.length<this.listTotal&&(this.finished=!1),this.Toast.clear()})},timestampToTime(t){let s=new Date(t),e=s.getFullYear()+"-",a=(s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1)+"-",i=(s.getDate()+1<10?"0"+s.getDate():s.getDate())+" ",r=(s.getHours()+1<10?"0"+s.getHours():s.getHours())+":",l=s.getMinutes()+1<10?"0"+s.getMinutes():s.getMinutes();return e+a+i+r+l},lookMessage(t){this.$router.push("/message/messagedetinfo?msgid="+t)},onLoad(){this.$axios.post({url:"message/history",data:{page:this.msgArr.length}}).then(t=>{if(t&&0==t.code){this.loading=!1;for(let s=0;s<t.data.length;s++)t.data[s]["message_time"]=this.timestampToTime(t.data[s]["message_time"]),t.data[s]["user_head_url"]=e("f121").baseURL+"/imgs/temporary/"+t.data[s]["user_head_url"],this.msgArr.push(t.data[s]);this.msgArr.length>=this.listTotal&&(this.finished=!0)}else this.msgArr.length>=this.listTotal&&(this.finished=!0)})},createFile(){this.$router.push("/message/messagesend")},myhistory(){this.$router.push("./message/messagehistory")}}},l=r,n=(e("6dc7"),e("2877")),o=Object(n["a"])(l,a,i,!1,null,"c5dfd212",null);s["default"]=o.exports},4254:function(t,s,e){},"6dc7":function(t,s,e){"use strict";e("4254")}}]);
//# sourceMappingURL=Message.3f4b076c.js.map