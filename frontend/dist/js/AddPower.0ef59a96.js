(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AddPower"],{"7d3e":function(e,t,a){"use strict";a("bb63")},"919f":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btn"},[a("van-nav-bar",{staticClass:"head",attrs:{"left-text":"返回","right-text":"","left-arrow":"",title:"添加权限",fixed:!0},on:{"click-left":e.onClickLeft}}),a("van-cell-group",[a("van-field",{attrs:{label:"权限名",maxlength:"20",placeholder:"请输入权限名"},model:{value:e.pname,callback:function(t){e.pname=t},expression:"pname"}})],1),a("van-cell-group",[a("van-field",{attrs:{label:"权限C/A",placeholder:"请输入权限C/A"},model:{value:e.purl,callback:function(t){e.purl=t},expression:"purl"}})],1),a("van-field",{attrs:{readonly:"",clickable:"",label:"父级菜单",value:e.value,placeholder:"选择父级url"},on:{click:function(t){e.showPicker=!0}}}),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[a("van-picker",{attrs:{"show-toolbar":"","value-key":"",columns:e.power_arr},on:{cancel:function(t){e.showPicker=!1},confirm:e.onConfirmRole}})],1),""!=e.pname&&""!=e.value?a("van-button",{staticClass:"sub",attrs:{type:"info"},on:{click:e.submits}},[e._v("添加")]):a("van-button",{staticClass:"sub",attrs:{type:"info",disabled:""}},[e._v("添加")])],1)},r=[],s=(a("ff23"),{data(){return{pname:"",purl:"",value:"",power_data:{},power_obj:{},power_arr:[],showPicker:!1,parentid:""}},methods:{onClickLeft(){this.$router.push({path:"/about/power"})},onConfirmRole(e){this.value=e,this.showPicker=!1;for(let t in this.power_obj)this.power_obj[t]==e&&(this.parentid=t)},submits(){for(let e in this.power_arr)if(console.log(this.power_arr[e],this.pname),this.power_arr[e]==this.pname)return void this.Toast.fail("不允许创建已有的权限");this.Toast.loading({message:"添加中...",forbidClick:!0,duration:0}),this.$axios.post({url:"/power/add",data:{pname:this.pname,purl:this.purl,parentid:this.parentid}}).then(e=>{"0"==e.code?(this.Toast.success("添加成功"),this.$router.push({path:"/about/power"})):"-8"==e.code?this.Toast.fail("权限名已经存在"):this.Toast.fail("添加失败")})}},mounted(){this.$axios.get({url:"/power/select"}).then(e=>{if(console.log(e),e instanceof Array){let t={};e.forEach((e,a)=>{t[e.pid]=e.pname,this.power_arr.push(e.pname)}),t[0]="没有父级菜单",this.power_arr.splice(0,0,"没有父级菜单"),this.power_obj=t}})}}),i=s,l=(a("7d3e"),a("2877")),n=Object(l["a"])(i,o,r,!1,null,"a96a5786",null);t["default"]=n.exports},bb63:function(e,t,a){}}]);
//# sourceMappingURL=AddPower.0ef59a96.js.map