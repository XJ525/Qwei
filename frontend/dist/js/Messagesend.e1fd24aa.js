(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Messagesend"],{"3da0":function(t,s,e){"use strict";e("b3a4")},"8e2e":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"messagesend"},[e("div",{staticClass:"head"},[e("van-nav-bar",{attrs:{title:"发布站内信","left-text":"返回","left-arrow":""},on:{"click-left":t.backon}})],1),e("div",{staticClass:"mains"},[e("div",{staticClass:"contacts",on:{click:t.choicecontacts}},[e("span",{staticClass:"left"},[t._v("请选择您要发送的人")]),e("span",{staticClass:"right"},[e("van-icon",{attrs:{name:"arrow"}})],1)]),e("div",{staticClass:"texts"},[e("van-field",{staticClass:"texta",attrs:{name:"texta",rows:"10",type:"textarea",maxlength:"500",placeholder:"编辑内容","show-word-limit":""},model:{value:t.textareas,callback:function(s){t.textareas=s},expression:"textareas"}}),e("p",{staticClass:"btn"},[""!=t.select&&""!=t.textareas?e("van-button",{staticClass:"confirm",attrs:{type:"info"},on:{click:t.confirms}},[t._v("确认发布")]):e("van-button",{staticClass:"confirm",attrs:{type:"info",disabled:""}},[t._v("确认发布")]),e("van-button",{staticClass:"cancel",attrs:{type:"default"},on:{click:t.cancel}},[t._v("取消发布")])],1)],1)]),e("div",{staticClass:"selected"},[t._v(" 已选择： "),e("span",{staticClass:"selectedperson",attrs:{"v-model":t.select}},[t._v(" "+t._s(t.select)+" ")])])])},i=[],c={name:"Messagesend",data(){return{textareas:"",select:"",selectData:[]}},mounted(){void 0!=this.$route.query.data&&this.selectrander(this.$route.query.data)},methods:{backon(){this.$router.push("/message")},choicecontacts(){this.$router.push("/message/messagesend/choicecontacts")},cancel(){this.Dialog.confirm({title:"确定取消？",message:"取消发送将失去全部已编辑内容"}).then(()=>{this.$router.push("/message")})},confirms(){this.Dialog.confirm({title:"确定发布？"}).then(()=>{this.textareas=this.textareas.trim(),""!=this.textareas?this.$axios.post({url:"message/sendmsg",data:{content:this.textareas,userArr:this.selectData}}).then(t=>{0==t.code?(this.Toast.success("发布成功"),this.$router.push("/message")):(console.log(t.message),this.Toast.fail(t.message))}):this.Toast.fail("内容不能为空")})},selectrander(t){t=JSON.parse(t);for(let s=0;s<t.length;s++)this.select+=""==this.select?t[s].username:", "+t[s].username,this.selectData.push(t[s]["user_id"])}}},n=c,l=(e("3da0"),e("2877")),r=Object(l["a"])(n,a,i,!1,null,null,null);s["default"]=r.exports},b3a4:function(t,s,e){}}]);
//# sourceMappingURL=Messagesend.e1fd24aa.js.map