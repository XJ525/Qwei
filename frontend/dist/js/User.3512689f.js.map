{"version":3,"sources":["webpack:///./src/views/about/user/User.vue?5a2f","webpack:///src/views/about/user/User.vue","webpack:///./src/views/about/user/User.vue?5a02","webpack:///./src/views/about/user/User.vue","webpack:///./src/views/about/user/User.vue?9785"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","backon","onClickRight","queryClick","onCancel","model","value","callback","$$v","sms","expression","activeNames","_l","item","key","ref","refInFor","result","staticStyle","_v","_e","once","keys","scopedSlots","_u","fn","everyoneArr","open_status","$event","freezes","replece","proxy","seeMsg","style","height","showQuery","staticRenderFns","name","checkedVal","checkAll","nowLoginId","state","frezz","blog","Toast","loading","message","forbidClick","duration","$axios","methods","trim","$router","push","path","uid","sta","console","log","Dialog","confirm","title","msgId","allData","listArr","length","x","i","dataArr","component"],"mappings":"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","file":"js/User.3512689f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Choicecontacts\"},[_c('div',{staticClass:\"head\"},[_c('van-nav-bar',{staticClass:\"usertitle\",attrs:{\"fixed\":\"\",\"title\":\"用户\",\"left-text\":\"返回\",\"right-text\":\"添加\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.backon,\"click-right\":_vm.onClickRight}})],1),_c('van-search',{staticClass:\"sear\",attrs:{\"placeholder\":\"请输入搜索关键词\"},on:{\"click\":_vm.queryClick,\"search\":_vm.queryClick,\"cancel\":_vm.onCancel,\"blur\":_vm.queryClick},model:{value:(_vm.sms),callback:function ($$v) {_vm.sms=$$v},expression:\"sms\"}}),_c('div',{staticClass:\"body\"},[_c('van-collapse',{model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=$$v},expression:\"activeNames\"}},_vm._l((_vm.everyoneArr),function(item,key){return _c('van-collapse-item',{key:key,ref:key,refInFor:true,attrs:{\"title\":key,\"name\":key}},[(item == '')?_c('van-checkbox-group',{model:{value:(_vm.result),callback:function ($$v) {_vm.result=$$v},expression:\"result\"}},[_c('span',{staticStyle:{\"font-size\":\"0.5rem\"}},[_vm._v(\"该部门还没有员工哦\")])]):_vm._e(),_c('van-checkbox-group',{model:{value:(_vm.result),callback:function ($$v) {_vm.result=$$v},expression:\"result\"}},[_c('van-cell-group',_vm._l((item),function(once,keys){return _c('van-swipe-cell',{key:keys,scopedSlots:_vm._u([{key:\"right\",fn:function(){return [(_vm.everyoneArr[key][keys].open_status == '-1')?_c('van-button',{staticClass:\"delete-button\",attrs:{\"square\":\"\",\"text\":\"解冻\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.freezes(once['user_id'], '1', key, keys)}}}):_c('van-button',{staticClass:\"delete-button\",attrs:{\"square\":\"\",\"text\":\"冻结\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.freezes(once['user_id'], '-1', key,keys)}}}),_c('van-button',{staticClass:\"redice\",attrs:{\"square\":\"\",\"text\":\"重置密码\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.replece(once['user_id'])}}})]},proxy:true}],null,true)},[_c('van-cell',{attrs:{\"clickable\":\"\",\"title\":(\" \" + (once['username']))},on:{\"click\":function($event){return _vm.seeMsg(once['user_id'])}}})],1)}),1)],1)],1)}),1)],1),_c('van-popup',{style:({ height: '7%' }),attrs:{\"position\":\"top\"},model:{value:(_vm.showQuery),callback:function ($$v) {_vm.showQuery=$$v},expression:\"showQuery\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"Choicecontacts\">\n    <div class=\"head\">\n      <van-nav-bar\n        fixed\n        title=\"用户\"\n        left-text=\"返回\"\n          right-text=\"添加\"\n        @click-left=\"backon\"\n        @click-right=\"onClickRight\"\n        left-arrow\n        class=\"usertitle\"\n      >\n        <!-- <template #right>\n          <van-icon name=\"search\" size=\"18\" @click=\"querys\" />\n        </template> -->\n      </van-nav-bar>\n    </div>\n\n    <van-search\n      v-model=\"sms\"\n      @click=\"queryClick\"\n      @search=\"queryClick\"\n      @cancel=\"onCancel\"\n      @blur=\"queryClick\"\n      placeholder=\"请输入搜索关键词\"\n      class=\"sear\"\n    />\n   \n\n    <div class=\"body\">\n      <van-collapse v-model=\"activeNames\">\n        <van-collapse-item\n          v-for=\"(item, key) in everyoneArr\"\n          :key=\"key\"\n          :title=\"key\"\n          :name=\"key\"\n          :ref=\"key\"\n        >\n           <van-checkbox-group v-if=\"item == ''\" v-model=\"result\">\n               <span style=\"font-size:0.5rem\">该部门还没有员工哦</span>\n            </van-checkbox-group> \n          <van-checkbox-group v-model=\"result\">\n            <van-cell-group>\n              <van-swipe-cell v-for=\"(once, keys) in item\" :key=\"keys\">\n               \n                \n                <van-cell\n                  clickable\n                  :title=\"` ${once['username']}`\"\n                  @click=\"seeMsg(once['user_id'])\"\n                >\n                </van-cell>\n               \n                <template #right>\n                \n                  <van-button  \n                    v-if=\"everyoneArr[key][keys].open_status == '-1'\"\n                    square\n                    text=\"解冻\"\n                    type=\"danger\"\n                    class=\"delete-button\"\n                    @click=\"freezes(once['user_id'], '1', key, keys)\"\n                  />\n                  <!-- everyoneArr[key][keys].open_status -->\n                  <van-button\n                    v-else\n                    square\n                    text=\"冻结\"\n                    type=\"danger\"\n                    class=\"delete-button\"\n                    @click=\"freezes(once['user_id'], '-1', key,keys)\"\n                  />\n\n                  <van-button\n                    square\n                    text=\"重置密码\"\n                    @click=\"replece(once['user_id'])\"\n                    type=\"danger\"\n                    class=\"redice\"\n                  />\n                </template>\n              </van-swipe-cell>\n            </van-cell-group>\n          </van-checkbox-group>\n        </van-collapse-item>\n      </van-collapse>\n    </div>\n\n    <van-popup v-model=\"showQuery\" position=\"top\" :style=\"{ height: '7%' }\">\n      <!-- <div class=\"querysClick\">\n        <van-field\n          v-model=\"sms\"\n          center\n          clearable\n          placeholder=\"请输入用户名或部门\"\n          :style=\"{ height: '100%' }\"\n        >\n          <template #button>\n            <van-button plain type=\"info\" class=\"btn\" @click=\"queryClick\"\n              >确认搜索</van-button\n            >\n          </template>\n        </van-field>\n      </div> -->\n    </van-popup>\n  </div>\n</template>\n\n\n<script>\nexport default {\n  name: \"Choicecontacts\",\n  data() {\n    return {\n      everyoneArr: [],\n      checkedVal: [],\n      activeNames: [],\n      result: [],\n      showQuery: false,\n      checkAll: false,\n      sms: \"\",\n      nowLoginId: \"\",\n      value: \"\",\n      state: true,\n      frezz: \"冻结\",\n      blog: false,\n    };\n  },\n\n  mounted() {\n    //渲染\n    this.Toast.loading({\n      message: \"\",\n      forbidClick: true,\n      duration: 0,\n    });\n    this.$axios\n      .get({\n        url: \"message/maillist\",\n      })\n      .then((res) => {\n        // console.log(res);\n        if (res) {\n          this.handleData(res);\n        }\n        this.Toast.clear();\n      });\n\n    // this.$axios\n    //   .get({\n    //     url: \"/message/maillistate\",\n    //   })\n    //   .then((res) => {\n    //     console.log(res);\n    //   });\n  },\n\n  methods: {\n    //搜索栏\n    querys() {\n      this.showQuery = true;\n    },\n\n    //模糊搜索\n    queryClick() {\n      let sms = this.sms.trim();\n      if (sms == \"\") {\n        return \"搜索信息不能为空\";\n      }\n\n      this.$axios\n        .post({\n          url: \"message/querylist\",\n          data: {\n            msg: sms,\n          },\n        })\n        .then((res) => {\n          if (res.code == 0) {\n            let dataArr = {};\n            for (let x = 0; x < res.data.length; x++) {\n              //   console.log(dataArr[res.data[x].name]);\n              if (dataArr[res.data[x].name] != undefined) {\n                dataArr[res.data[x].name].push(res.data[x]);\n              } else {\n                dataArr[res.data[x].name] = [];\n                dataArr[res.data[x].name].push(res.data[x]);\n              }\n            }\n\n            this.everyoneArr = dataArr;\n            console.log(this.$refs[dataArr[0]]);\n            this.sms = \"\";\n            this.showQuery = false;\n            this.state = true;\n          } else {\n            this.Toast(res.message);\n            this.sms = \"\";\n            this.showQuery = false;\n            // console.log(res.message)\n          }\n\n          // console.log(res, this.everyoneArr)\n        });\n    },\n\n    //添加用户\n    onClickRight() {\n      this.$router.push({\n        path: \"/about/us/test\"\n      })\n    },\n\n    //冻结账号\n    freezes(uid, sta, name, key) {\n      this.$axios\n        .post({\n          url: \"user/freeze\",\n          data: {\n            uid: JSON.stringify([uid]),\n            option: sta,\n          },\n        })\n        .then((res) => {\n\n          if (res && res.code) {\n            \n            if (res.code == \"0\") {\n              \n              this.Toast.success(\"成功\");\n            \n              if (sta == '1') {\n                \n                  this.everyoneArr[name][key].open_status = '1';\n              } else {\n               \n                  this.everyoneArr[name][key].open_status = '-1';\n              }\n              console.log(this.everyoneArr[name][key].open_status)\n            \n            } else {\n              this.Toast.fail(\"失败\");\n            }\n\n          }\n\n          console.log(res);\n        });\n    },\n    //重置密码\n    replece(uid) {\n      console.log(uid);\n      this.Dialog.confirm({\n        title: \"重置密码\",\n        message: \"是否确认重置密码？\",\n      })\n        .then(() => {\n          // on confirm\n          this.$axios\n            .post({\n              url: \"/user/repwd\",\n              data: {\n                uid,\n              },\n            })\n            .then((res) => {\n              if (res && res.code == \"0\") {\n                this.Toast.success(\"重置密码成功\");\n              } else {\n                this.Toast.fail(\"重置密码失败\");\n              }\n            });\n        })\n        .catch(() => {\n          // on cancel\n          this.Toast({\n            message: \"已取消\",\n            position: \"bottom\",\n          });\n        });\n    },\n\n    seeMsg(msgId) {\n        this.$router.push(`/about/user/alter/${msgId}`);\n        console.log(msgId);\n    },\n\n    onSearch(msgId) {\n      //   this.$router.push(`/about/user/alter/${msgId}`);\n    },\n\n    onCancel() {\n      this.Toast(\"取消\");\n    },\n\n    //返回\n    backon() {\n      this.$router.push(\"/about\");\n    },\n\n    //处理数据\n    handleData({ dataArr, listArr }) {\n      // console.log(dataArr, listArr)\n      let allData = {};\n      if (listArr && listArr.length) {\n        for (let x = 0; x < listArr.length; x++) {\n          allData[listArr[x][\"name\"]] = [];\n\n          for (let i = 0; i < dataArr.length; i++) {\n            if (listArr[x][\"department_id\"] == dataArr[i][\"department_id\"]) {\n              allData[listArr[x][\"name\"]].push(dataArr[i]);\n            }\n          }\n        }\n      }\n\n      this.everyoneArr = allData;\n      // console.log(allData)\n    },\n  },\n};\n</script>\n\n\n\n<style scoped lang=\"less\">\n.Choicecontacts {\n  padding-top: 14vh;\n  min-height: 86vh;\n}\n\n.sear {\n  width: 100vw;\n  height: 7vh;\n  position: fixed;\n  left: 0;\n  top: 7vh;\n  z-index: 99;\n}\n\n.querysClick {\n  margin: 2% auto;\n  width: 80%;\n  height: 70%;\n  border: 1px solid #999;\n  border-radius: 1.5rem;\n  overflow: hidden;\n  .btn {\n    border: none;\n    border-left: 1px solid #999;\n    span {\n      color: #777;\n    }\n  }\n}\n\n.Choicecontacts {\n  width: 100%;\n\n  .body {\n    padding-bottom: 5rem;\n  }\n\n  .chunk {\n    padding: 0.7rem 2rem;\n  }\n\n  .upload {\n    width: 80%;\n  }\n}\n\n.delete-button {\n  height: 100%;\n  border: none;\n  background-color: #ffd35c;\n}\n\n.redice {\n  background-color: #1989fa;\n  border: none;\n  height: 100%;\n}\n\n.usertitle {\n  height: 7vh;\n}\n\n\n/deep/ .van-icon-arrow-left {\n  color: #000;\n  font-size: 1rem;\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=4c6406c0&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=4c6406c0&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c6406c0\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=4c6406c0&scoped=true&lang=less&\""],"sourceRoot":""}