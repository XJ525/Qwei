{"version":3,"sources":["webpack:///./src/views/workmessage/Workmessagesend.vue?e5c5","webpack:///src/views/workmessage/Workmessagesend.vue","webpack:///./src/views/workmessage/Workmessagesend.vue?859d","webpack:///./src/views/workmessage/Workmessagesend.vue","webpack:///./src/views/workmessage/Workmessagesend.vue?944d"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$router","replace","choicecontacts","_m","model","value","callback","$$v","select","expression","directives","name","rawName","domProps","target","composing","textareas","confirms","_v","cancel","staticRenderFns","component"],"mappings":"0HAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,SAAS,YAAY,KAAK,aAAa,IAAIC,GAAG,CAAC,aAAa,SAASC,GAAQ,OAAOT,EAAIU,QAAQC,QAAQ,UAAU,GAAGP,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,YAAYE,GAAG,CAAC,MAAQR,EAAIY,iBAAiB,CAACZ,EAAIa,GAAG,GAAGT,EAAG,IAAI,CAACE,YAAY,UAAU,CAACF,EAAG,iBAAiB,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,OAAO,SAAW,IAAIO,MAAM,CAACC,MAAOf,EAAU,OAAEgB,SAAS,SAAUC,GAAMjB,EAAIkB,OAAOD,GAAKE,WAAW,aAAa,IAAI,KAAKf,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,WAAW,CAACgB,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUP,MAAOf,EAAa,UAAEmB,WAAW,cAAcb,YAAY,QAAQC,MAAM,CAAC,KAAO,QAAQ,KAAO,KAAK,KAAO,KAAK,YAAc,aAAagB,SAAS,CAAC,MAASvB,EAAa,WAAGQ,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOe,OAAOC,YAAqBzB,EAAI0B,UAAUjB,EAAOe,OAAOT,WAAUX,EAAG,IAAI,CAACE,YAAY,OAAO,CAACF,EAAG,aAAa,CAACE,YAAY,UAAUC,MAAM,CAAC,KAAO,QAAQC,GAAG,CAAC,MAAQR,EAAI2B,WAAW,CAAC3B,EAAI4B,GAAG,UAAUxB,EAAG,aAAa,CAACE,YAAY,SAASC,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQR,EAAI6B,SAAS,CAAC7B,EAAI4B,GAAG,WAAW,YACpuCE,EAAkB,CAAC,WAAa,IAAI9B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,IAAI,CAACA,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACN,EAAI4B,GAAG,eAAexB,EAAG,OAAO,CAACE,YAAY,SAAS,CAACN,EAAI4B,GAAG,WCuChN,GACE,KAAF,kBACE,OACE,MAAJ,CACM,UAAN,GACM,WAAN,GACM,OAAN,KAGE,eACF,2BACI,KAAJ,sCAEE,QAAF,CAGI,SACE,KAAN,gBACQ,MAAR,QACQ,QAAR,mBAEA,UACQ,KAAR,qBAKI,WACE,KAAN,gBACQ,MAAR,UAEA,UAGA,0BAKA,0BACU,KAAV,wBAIA,2BACU,KAAV,qBAKQ,KAAR,aACU,IAAV,sBACU,KAAV,CACY,QAAZ,eACY,QAAZ,mBAEA,KACA,IACA,WACY,KAAZ,sBACY,KAAZ,2BAEY,KAAZ,wBA3BU,KAAV,wBAqCI,iBACE,KAAN,0DAII,aAAJ,GACM,EAAN,cACM,IAAN,uBACQ,KAAR,yDACQ,KAAR,oCCzHwW,I,wBCQpWG,EAAY,eACd,EACAhC,EACA+B,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,6CCnBf,W","file":"js/Workmessagesend.23e2fda2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"noticesend\"},[_c('div',{staticClass:\"head\"},[_c('van-nav-bar',{attrs:{\"title\":\"发送工作通知\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.replace('/')}}})],1),_c('div',{staticClass:\"noticeMain\"},[_c('div',{staticClass:\"mainTitle\",on:{\"click\":_vm.choicecontacts}},[_vm._m(0),_c('p',{staticClass:\"select\"},[_c('van-cell-group',[_c('van-field',{attrs:{\"label\":\"已选择：\",\"readonly\":\"\"},model:{value:(_vm.select),callback:function ($$v) {_vm.select=$$v},expression:\"select\"}})],1)],1)]),_c('div',[_c('div',{staticClass:\"texts\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textareas),expression:\"textareas\"}],staticClass:\"texta\",attrs:{\"name\":\"texta\",\"cols\":\"30\",\"rows\":\"10\",\"placeholder\":\"编辑工作通知的内容\"},domProps:{\"value\":(_vm.textareas)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.textareas=$event.target.value}}}),_c('p',{staticClass:\"btn\"},[_c('van-button',{staticClass:\"confirm\",attrs:{\"type\":\"info\"},on:{\"click\":_vm.confirms}},[_vm._v(\"确认发送\")]),_c('van-button',{staticClass:\"cancel\",attrs:{\"type\":\"default\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消发送\")])],1)])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_c('span',{staticClass:\"left\"},[_vm._v(\"请选择您要发送的人\")]),_c('span',{staticClass:\"right\"},[_vm._v(\">\")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"noticesend\">\n        <div class=\"head\">\n            <van-nav-bar title=\"发送工作通知\"\n                        left-text=\"返回\"\n                        left-arrow\n                        @click-left=\"$router.replace('/')\">\n            </van-nav-bar>\n        </div>\n\n        <div class=\"noticeMain\">\n\n            <div class=\"mainTitle\"  @click=\"choicecontacts\">\n                <p>\n                    <span class=\"left\">请选择您要发送的人</span>\n                    <span class=\"right\">&gt;</span>\n                </p>\n                <p class=\"select\">\n                    <van-cell-group>\n                        <van-field label=\"已选择：\" v-model=\"select\" readonly />\n                    </van-cell-group>\n                </p>\n            </div>\n\n            <div>\n                <div class=\"texts\">\n                    <textarea name=\"texta\" class=\"texta\" cols=\"30\" rows=\"10\" placeholder=\"编辑工作通知的内容\" v-model=\"textareas\"></textarea>\n                    <p class=\"btn\">\n                        <van-button type=\"info\" @click=\"confirms\" class=\"confirm\">确认发送</van-button>\n                        <van-button type=\"default\" @click=\"cancel\" class=\"cancel\">取消发送</van-button>\n                    </p>\n                </div>\n            </div>\n\n        </div>\n\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'Workmessagesend',\n    data () {\n        return {\n            textareas: '',  //公告内容\n            selectData: [],    //已选联系人\n            select: '',         //回显已选联系人\n        }\n    },\n    mounted () {\n        if (this.$route.query.data == undefined) return;\n        this.selectrander (this.$route.query.data)\n    },\n    methods: {\n\n        //取消发布\n        cancel () {\n            this.Dialog.confirm({\n                title: '确定取消？',\n                message: '取消发布将失去全部已编辑内容',\n            })\n            .then(() => {\n                this.$router.push('/')\n            })\n        },\n\n        //确定发布\n        confirms () {\n            this.Dialog.confirm({\n                title: '确定发布？',\n            })\n            .then(() => {\n                \n                \n                if (this.textareas.trim() == '') {\n                    this.Toast.fail('内容不能为空');\n                    return;\n                }\n\n                if (this.textareas.length > 500) {\n                    this.Toast.fail('字符长度超出500');\n                    return;\n                }\n\n                if (this.selectData.length > 100) {\n                    this.Toast.fail('至少选择1人');\n                    return;\n                }\n\n\n                this.$axios.post({\n                     url: 'workmessage/sendmsg',\n                    data: {\n                        content: this.textareas,\n                        userArr: this.selectData\n                    }\n                }).then (\n                    res => {\n                        if (res.code == 0) {\n                            this.Toast.success('成功发布');\n                            this.$router.replace('/about')\n                        } else {    \n                            this.Toast.fail(res.message);\n                        }\n                    }\n\n                )\n\n            })\n        },\n\n        //联系人列表\n        choicecontacts () {\n            this.$router.push('/workmessage/workmessagesend/workmsgceco')\n        },\n\n        //已选择的人数\n        selectrander (dataArr) {\n            dataArr = JSON.parse(dataArr)\n            for (let x = 0; x < dataArr.length; x++) {\n                this.select += (this.select == '') ? dataArr[x].username : ', ' + dataArr[x].username;\n                this.selectData.push(dataArr[x]['user_id'])\n            }\n        },\n\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n.noticesend {\n\n    .noticeMain {\n        width: 100%;\n        height: auto;\n        .mainTitle {\n            margin: 2rem auto;\n            width: 80%;\n            height: auto;\n            border-radius: 0.5rem;\n            overflow: hidden;\n        }\n\n        .left {\n            display: block;\n            float: left;\n            margin-left: 1rem;\n            font-size: 0.8rem;\n            font-weight: bold;\n        }\n\n        .right {\n            display: block;\n            float: right;\n            margin-right: 1rem;\n            color: #999;\n        }\n\n        .select {\n            clear: both;\n            padding: 0.5rem;\n            .selectName {\n                display: block;\n                \n                width: 80%;\n                border: 1px solid red;\n            }\n        }\n    }\n\n    .texts {\n\n        width: 80%;\n        margin: 2rem auto;\n        clear: both;\n        .texta {\n            width: 100%;\n            height: auto;\n            resize: none;\n        }   \n\n        textarea {\n            padding: 0.5rem;\n            border-radius: 1rem;\n        }\n    }\n}\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Workmessagesend.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Workmessagesend.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Workmessagesend.vue?vue&type=template&id=503351dd&scoped=true&\"\nimport script from \"./Workmessagesend.vue?vue&type=script&lang=js&\"\nexport * from \"./Workmessagesend.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Workmessagesend.vue?vue&type=style&index=0&id=503351dd&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"503351dd\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Workmessagesend.vue?vue&type=style&index=0&id=503351dd&lang=less&scoped=true&\""],"sourceRoot":""}