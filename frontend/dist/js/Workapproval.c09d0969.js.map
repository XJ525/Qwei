{"version":3,"sources":["webpack:///./src/views/workdiary/Workapproval.vue?9550","webpack:///src/views/workdiary/Workapproval.vue","webpack:///./src/views/workdiary/Workapproval.vue?efc3","webpack:///./src/views/workdiary/Workapproval.vue","webpack:///./src/views/workdiary/Workapproval.vue?82cf","webpack:///./src/assets/imgs/moren.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","backOn","onRefresh","model","value","callback","$$v","refreshing","expression","finished","context","onLoad","loading","_l","item","key","$event","lookworkapproval","style","color","fontSize","_v","_s","username","log_content","msgArr","length","_e","staticRenderFns","name","onceArr","page","imgs","methods","time","date","Date","Y","getFullYear","M","D","h","m","msgId","localStorage","setItem","JSON","stringify","$router","push","path","$axios","component","module","exports"],"mappings":"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","file":"js/Workapproval.c09d0969.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"workapproval\"},[_c('div',{staticClass:\"head\"},[_c('van-nav-bar',{staticClass:\"title\",attrs:{\"title\":\"日志审核\",\"left-text\":\"返回\",\"fixed\":\"\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.backOn}})],1),_c('div',[_c('van-pull-refresh',{staticClass:\"content\",on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.refreshing),callback:function ($$v) {_vm.refreshing=$$v},expression:\"refreshing\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":_vm.context},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.msgArr),function(item){return _c('div',{key:item['leave_id'],staticClass:\"conters\",on:{\"click\":function($event){return _vm.lookworkapproval(item)}}},[_c('div',{staticClass:\"img\"},[_c('i',[_c('img',{attrs:{\"src\":item['user_head_url'],\"alt\":\"\",\"v-lazy\":item['user_head_url']}})])]),_c('div',{staticClass:\"conter\"},[_c('div',{staticClass:\"conterLeft\"},[_c('p',[_c('span',{style:({ color: 'black', fontSize:'1rem' })},[_vm._v(\"员工名称:\")]),_vm._v(\" \"+_vm._s(item.username)+\" \")]),_c('p',{staticClass:\"logcontent\"},[_c('span',{style:({ color: '#aaa' })},[_vm._v(\"日志内容:\")]),_vm._v(\" \"+_vm._s(item.log_content)+\" \")]),_c('p',{staticClass:\"partConter\"},[_c('span',{style:({ color: '#aaa' })},[_vm._v(\"提交时间:\")]),_vm._v(\" \"+_vm._s(item[\"log_time\"])+\" \")])]),_c('div',{staticClass:\"conterRight\"},[(item['log_read_state'] == 0)?_c('div',[_c('div',{staticClass:\"child\"})]):_c('div',[_c('div',{staticClass:\"read\"})])])])])}),0),(_vm.msgArr.length == 0)?_c('div',{staticClass:\"messageNull\"},[_vm._v(\"暂无日志\")]):_vm._e()],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"workapproval\">\n    <div class=\"head\">\n      <van-nav-bar\n        title=\"日志审核\"\n        left-text=\"返回\"\n        fixed\n        class=\"title\"\n        @click-left=\"backOn\"\n        left-arrow\n      >\n      </van-nav-bar>\n    </div>\n\n    <!-- <div v-if=\"msgArr.length > 0\"> -->\n\n    <div>\n      <van-pull-refresh\n        class=\"content\"\n        v-model=\"refreshing\"\n        @refresh=\"onRefresh\"\n      >\n        <van-list\n          v-model=\"loading\"\n          :finished=\"finished\"\n          :finished-text=\"context\"\n          @load=\"onLoad\"\n        >\n          <div\n            class=\"conters\"\n            v-for=\"item in msgArr\"\n            :key=\"item['leave_id']\"\n            @click=\"lookworkapproval(item)\"\n          >\n            <div class=\"img\">\n              <i>\n                <img\n                  :src=\"item['user_head_url']\"\n                  alt=\"\"\n                  :v-lazy=\"item['user_head_url']\"\n                />\n              </i>\n            </div>\n\n            <div class=\"conter\">\n              <div class=\"conterLeft\">\n                <p>\n                  <span :style=\"{ color: 'black', fontSize:'1rem' }\">员工名称:</span>\n                  {{ item.username }}\n                </p>\n\n                \n                <p class=\"logcontent\">\n                  <span :style=\"{ color: '#aaa' }\">日志内容:</span>\n                  {{ item.log_content }}\n                </p>\n\n                <p class=\"partConter\">\n                  <span :style=\"{ color: '#aaa' }\">提交时间:</span>\n                  {{ item[\"log_time\"] }}\n                </p>\n\n              </div>\n\n              <div class=\"conterRight\">\n                <div v-if=\"item['log_read_state'] == 0\">\n                  <div class=\"child\"></div>\n                </div>\n\n                <div v-else>\n                  <div class=\"read\"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </van-list>\n\n        <div class=\"messageNull\" v-if=\"msgArr.length == 0\">暂无日志</div>\n      </van-pull-refresh>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Allapproval\",\n  data() {\n    return {\n      loading: false, // 加载数据\n      finished: false, //数据完全加载完\n      refreshing: false,\n      msgArr: [],\n      onceArr: [],\n      page: \"\", //页数\n      imgs: require(\"../../assets/imgs/moren.png\"), //默认头像\n      context: \"到底了！\",\n    };\n  },\n\n  mounted() {\n    //更新当前页数\n    this.page = this.page || 1;\n  },\n\n  methods: {\n    // 时间戳转换成时间\n    timestampToTime(time) {\n      let date = new Date(time); //时间戳为10位需*1000，时间戳为13位的话不需乘1000\n      let Y = date.getFullYear() + \"-\";\n      let M =\n        (date.getMonth() + 1 < 10\n          ? \"0\" + (date.getMonth() + 1)\n          : date.getMonth() + 1) + \"-\";\n      let D =\n        (date.getDate() + 1 < 10 ? \"0\" + date.getDate() : date.getDate()) + \" \";\n      let h =\n        (date.getHours() + 1 < 10 ? \"0\" + date.getHours() : date.getHours()) +\n        \":\";\n      let m =\n        date.getMinutes() + 1 < 10\n          ? \"0\" + date.getMinutes()\n          : date.getMinutes();\n      return Y + M + D + h + m;\n      // console.log(timestampToTime (1533293827000))\n    },\n\n    //阅读工作通知\n    lookworkapproval(msgId) {\n      localStorage.setItem(\"data\", JSON.stringify(msgId));\n      this.$router.push({\n        path: \"/workdetails\",\n      });\n    },\n\n    //无线加载数据更新\n    onLoad() {\n      this.$axios\n        .get({\n          url: \"/worklog/everoneworklog\",\n          params: {\n            page: this.page,\n          },\n        })\n        .then((res) => {\n          console.log(res);\n\n          if (res && res.code == -100) {\n            this.loading = false;\n            this.finished = true;\n            this.context = \"\";\n            // return\n          }\n          //下拉加载\n          if (this.refreshing) {\n            this.msgArr = [];\n            this.refreshing = false;\n          }\n\n          //渲染数据\n          if (res && res.data) {\n            for (let i = 0; i < res.data.length; i++) {\n              //换算时间\n              res.data[i][\"log_time\"] = this.timestampToTime(\n                res.data[i][\"log_time\"]\n              );\n\n              //设置头像\n              if (\n                res.data[i][\"user_head_url\"] == null ||\n                res.data[i][\"user_head_url\"] == \"\"\n              ) {\n                res.data[i][\"user_head_url\"] = this.imgs;\n              } else {\n                res.data[i][\"user_head_url\"] =\n                  require('../../config').baseURL + \"/imgs/temporary/\" +\n                  res.data[i][\"user_head_url\"];\n              }\n\n              this.msgArr.push(res.data[i]);\n              this.msgArr = this.msgArr.reverse();\n            }\n          }\n\n          //加载完成\n          this.loading = false;\n\n          //当前页数\n          this.page += 1;\n\n          //数据全部加载完成\n          if (this.page > res.pageOverall) {\n            this.finished = true;\n          } else if (!res.pageOverall) {\n            this.finished = true;\n          }\n        });\n    },\n\n    onRefresh() {\n      // 清空列表数据\n      this.finished = false;\n\n      //page重载为一\n      this.page = 1;\n\n      // 重新加载数据\n      this.onLoad();\n\n      // 将 loading 设置为 true，表示处于加载状态\n      this.loading = true;\n    },\n\n    //返回\n    backOn() {\n      this.$router.push(\"/about\");\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.workapproval {\n    padding-top: 7vh;\n    padding-bottom: 1vh;\n\n    .title {\n        height: 7vh;\n    }\n}\n\n\n\n.message {\n  height: 100vh;\n  overflow: hidden;\n}\n\n.conters {\n  width: 90%;\n  height: auto;\n  display: flex;\n  align-content: stretch;\n  background-color: #fff;\n//   border: 1px solid rgb(196, 195, 195);\n  border-radius: 5px;\n  margin: 1vh auto;\n\n  .img {\n    flex: 2;\n    background-color: #fff;\n    border-radius: 5px;\n    i {\n      display: block;\n      width: 3rem;\n      height: 3rem;\n      border-radius: 3rem;\n      overflow: hidden;\n      background-size: 3rem 3rem;\n      border: none;\n      margin: calc((100% - 1rem) / 2) auto;\n      img {\n        width: 3rem;\n        height: 3rem;\n      }\n    }\n  }\n  .conter {\n    flex: 8;\n    .partConter {\n      font-size: 0.8rem;\n      color: #aaa;\n      display: -webkit-box;\n      -webkit-box-orient: vertical;\n      -webkit-line-clamp: 1;\n    }\n\n    .logcontent {\n      width: 11.25rem;\n      padding-top: 0.3rem;\n      color: #aaa;\n      overflow: hidden;\n      display: -webkit-box;\n      -webkit-line-clamp: 1;\n      -webkit-box-orient: vertical;\n    }\n\n    p {\n      margin: 0.4rem 5px;\n    }\n  }\n\n  .conterLeft {\n    float: left;\n    width: 65%;\n    height: 5rem;\n    overflow: hidden;\n  }\n\n  .conterRight {\n    float: right;\n    width: 35%;\n\n    //未读\n    .child {\n      float: right;\n      margin-top: 1.2rem;\n      margin-right: 1.2rem;\n      width: 0.3rem;\n      height: 0.3rem;\n      background: red;\n      border-radius: 5px;\n    }\n\n    //已读\n    .read {\n      float: right;\n      margin-top: 1.2rem;\n      margin-right: 1.2rem;\n      width: 0.4rem;\n      height: 0.4rem;\n      background: #fff;\n      border-radius: 4px;\n    }\n\n    .conterRightTime {\n      margin-top: 2.5rem;\n      clear: right;\n      width: 90%;\n      text-align: right;\n      font-size: 0.1rem;\n      color: #9a9a9a;\n    }\n  }\n}\n\n.messageNull {\n  margin: 3rem auto;\n  width: 80%;\n  text-align: center;\n  color: #787887;\n}\n.content {\n  height: auto;\n}\n\n\n/deep/ .van-icon-arrow-left {\n  color: #000;\n  font-size: 1rem;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Workapproval.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Workapproval.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Workapproval.vue?vue&type=template&id=4546f3f8&scoped=true&\"\nimport script from \"./Workapproval.vue?vue&type=script&lang=js&\"\nexport * from \"./Workapproval.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Workapproval.vue?vue&type=style&index=0&id=4546f3f8&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4546f3f8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Workapproval.vue?vue&type=style&index=0&id=4546f3f8&scoped=true&lang=less&\"","module.exports = __webpack_public_path__ + \"img/moren.5c56d74a.png\";"],"sourceRoot":""}