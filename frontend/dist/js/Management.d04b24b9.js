(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Management"],{"0f14":function(e,t,n){},"738e":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"management"},[n("van-nav-bar",{attrs:{title:"添加","left-text":"返回","left-arrow":""},on:{"click-left":e.onClickLeft}}),n("van-popup",{style:{height:"60%"},attrs:{position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("van-picker",{attrs:{title:"请选择","show-toolbar":"",columns:e.columns},on:{confirm:e.onConfirm,cancel:e.onCancel,change:e.onChange}})],1),n("van-form",{on:{submit:e.onSubmit}},[n("van-field",{attrs:{name:"department",label:"部门",placeholder:"部门",rules:[{required:!0,message:"请填写要添加的部门"}]},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}}),n("van-cell",{attrs:{title:"负责人","is-link":"",center:!0,"arrow-direction":"down",required:!0,value:e.puser,"value-class":"left","title-class":"right"},on:{click:e.showPopup}},[n("span",[e._v(e._s(e.puser))])]),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1)],1)],1)},a=[],i={name:"Management",data(){return{department:"",principal:"",show:!1,columns:[],alluser:[],principalval:"",puser:"请选择"}},mounted(){this.$axios.get({url:"/department/selectuser"}).then(e=>{this.alluser=e;for(let t=0;t<e.length;t++)this.columns.push(`${e[t].user_id}:${e[t].username}`)})},methods:{onSubmit(e){console.log(e.department,this.principalval),this.$axios.post({url:"/department/add",data:{name:e.department,head_id:this.principalval}}).then(e=>{e&&e.code&&0==e.code&&(this.$toast(this.department+"创建成功!"),this.$router.replace("/departmentadmin")),e&&e.code&&0!=e.code&&this.Toast.fail(this.department+"部门已存在!")})},showPopup(){this.show=!0},onConfirm(e,t){this.show=!1;for(let n=0;n<this.alluser.length;n++){let t=e.slice(0,e.indexOf(":"));t==this.alluser[n]["user_id"]&&(this.puser=this.alluser[n].username,this.principalval=t)}},onChange(e,t,n){for(let s=0;s<this.alluser.length;s++){let e=t.slice(0,t.indexOf(":"));e==this.alluser[s]["user_id"]&&(this.puser=this.alluser[s].username,this.principalval=e)}this.$toast("当前选择："+t)},onCancel(e,t,n){this.show=!1},onClickLeft(){this.$router.push({path:"/departmentadmin"})}}},l=i,r=(n("84c3"),n("2877")),o=Object(r["a"])(l,s,a,!1,null,"f5587c52",null);t["default"]=o.exports},"84c3":function(e,t,n){"use strict";n("0f14")}}]);
//# sourceMappingURL=Management.d04b24b9.js.map