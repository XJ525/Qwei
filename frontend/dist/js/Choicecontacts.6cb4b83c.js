(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Choicecontacts"],{"0266":function(t,e,s){},"05f4":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Choicecontacts"},[s("div",{staticClass:"head"},[s("van-nav-bar",{staticClass:"choice",attrs:{fixed:"",title:"选择联系人","left-text":"返回","left-arrow":""},on:{"click-left":t.backon}})],1),s("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{click:t.queryClick,search:t.queryClick,blur:t.queryClick},model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}}),s("div",{staticClass:"body"},[s("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.everyoneArr,(function(e,a){return s("van-collapse-item",{key:a,attrs:{title:a,name:a}},[s("van-button",{attrs:{type:"default"},on:{click:function(s){return t.chunk(e)}},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),s("van-button",{attrs:{type:"default"},on:{click:function(s){return t.check(e)}}},[t._v("取消")]),s("van-checkbox-group",{model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},[s("van-cell-group",t._l(e,(function(e){return s("van-cell",{key:e["user_id"],attrs:{clickable:"",title:" "+e["username"]},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{name:e}})]},proxy:!0}],null,!0)})})),1)],1)],1)})),1)],1),s("div",{staticClass:"upload"},[s("van-goods-action",[s("van-goods-action-icon",{staticClass:"secletedico",attrs:{icon:"guide-o"}},[t._v("已选 "+t._s(t.result.length)+" 人 ")]),s("div",{staticClass:"selectedbtn"},[""!=t.result?s("van-goods-action-button",{staticClass:"confirmbtn",attrs:{type:"info",text:"确定"},on:{click:t.onClickButton}}):s("van-goods-action-button",{staticClass:"confirmbtn",attrs:{type:"info",text:"确定",disabled:""},on:{click:t.onClickButton}})],1)],1)],1)],1)},n=[],l={name:"Choicecontacts",data(){return{everyoneArr:[],checkedVal:[],activeNames:[],result:[],showQuery:!1,checkAll:!1,sms:"",nowLoginId:""}},mounted(){this.rander()},methods:{rander(){this.Toast.loading({message:"",forbidClick:!0,duration:1e4}),this.$axios.get({url:"message/maillist"}).then(t=>{console.log(t),t&&this.handleData(t),this.Toast.clear()})},querys(){this.showQuery=!0},queryClick(){let t=this.sms.trim();if(""==t)return"搜索信息不能为空";this.$axios.post({url:"message/querylist",data:{msg:t}}).then(t=>{if(0==t.code){let e={};for(let s=0;s<t.data.length;s++)console.log(e[t.data[s].name]),void 0!=e[t.data[s].name]||(e[t.data[s].name]=[]),e[t.data[s].name].push(t.data[s]);this.everyoneArr=e,this.sms="",this.showQuery=!1}else this.Toast(t.message),this.sms="",this.showQuery=!1})},check:function(t){if(console.log(t),!(this.result<=0)){this.result=this.result.sort(),t=t.sort(),console.log(this.result,t);for(let e=0;e<this.result.length;e++)for(let s=0;s<t.length;s++){if(e>=0&&void 0==this.result[e])return void console.log(111);console.log(void 0==this.result[e]),this.result[e]["user_id"]==t[s]["user_id"]&&this.result.splice(e,1)}}},chunk:function(t){this.result.push(...t),this.result=[...new Set(this.result)]},onClickButton(){this.result.length<=0?this.Toast("至少选择一人"):this.$router.push({path:"/message/messagesend",query:{data:JSON.stringify(this.result)}})},backon(){this.$router.push("/message/messagesend")},handleData({dataArr:t,listArr:e}){console.log(t,e);let s={};for(let a=0;a<e.length;a++){s[e[a]["name"]]=[];for(let n=0;n<t.length;n++)e[a]["department_id"]==t[n]["department_id"]&&s[e[a]["name"]].push(t[n])}this.everyoneArr=s}}},o=l,i=(s("ee4c"),s("2877")),c=Object(i["a"])(o,a,n,!1,null,"bcea2812",null);e["default"]=c.exports},ee4c:function(t,e,s){"use strict";s("0266")}}]);
//# sourceMappingURL=Choicecontacts.6cb4b83c.js.map