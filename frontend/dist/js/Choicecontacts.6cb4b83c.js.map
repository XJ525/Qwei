{"version":3,"sources":["webpack:///./src/views/message/Choicecontacts.vue?3c46","webpack:///src/views/message/Choicecontacts.vue","webpack:///./src/views/message/Choicecontacts.vue?dcfb","webpack:///./src/views/message/Choicecontacts.vue","webpack:///./src/views/message/Choicecontacts.vue?d40d"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","backon","queryClick","model","value","callback","$$v","sms","expression","activeNames","_l","item","key","$event","chunk","checkAll","_v","check","result","once","scopedSlots","_u","fn","ref","refInFor","proxy","_s","length","onClickButton","staticRenderFns","name","everyoneArr","checkedVal","showQuery","nowLoginId","rander","methods","Toast","loading","message","forbidClick","duration","$axios","trim","console","log","sort","x","i","undefined","splice","push","Set","$router","path","query","data","JSON","stringify","dataArr","listArr","allData","component"],"mappings":"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","file":"js/Choicecontacts.6cb4b83c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Choicecontacts\"},[_c('div',{staticClass:\"head\"},[_c('van-nav-bar',{staticClass:\"choice\",attrs:{\"fixed\":\"\",\"title\":\"选择联系人\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.backon}})],1),_c('van-search',{attrs:{\"placeholder\":\"请输入搜索关键词\"},on:{\"click\":_vm.queryClick,\"search\":_vm.queryClick,\"blur\":_vm.queryClick},model:{value:(_vm.sms),callback:function ($$v) {_vm.sms=$$v},expression:\"sms\"}}),_c('div',{staticClass:\"body\"},[_c('van-collapse',{model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=$$v},expression:\"activeNames\"}},_vm._l((_vm.everyoneArr),function(item,key){return _c('van-collapse-item',{key:key,attrs:{\"title\":key,\"name\":key}},[_c('van-button',{attrs:{\"type\":\"default\"},on:{\"click\":function($event){return _vm.chunk(item)}},model:{value:(_vm.checkAll),callback:function ($$v) {_vm.checkAll=$$v},expression:\"checkAll\"}},[_vm._v(\"全选\")]),_c('van-button',{attrs:{\"type\":\"default\"},on:{\"click\":function($event){return _vm.check(item)}}},[_vm._v(\"取消\")]),_c('van-checkbox-group',{model:{value:(_vm.result),callback:function ($$v) {_vm.result=$$v},expression:\"result\"}},[_c('van-cell-group',_vm._l((item),function(once){return _c('van-cell',{key:once['user_id'],attrs:{\"clickable\":\"\",\"title\":(\" \" + (once['username']))},scopedSlots:_vm._u([{key:\"right-icon\",fn:function(){return [_c('van-checkbox',{ref:\"checkboxes\",refInFor:true,attrs:{\"name\":once}})]},proxy:true}],null,true)})}),1)],1)],1)}),1)],1),_c('div',{staticClass:\"upload\"},[_c('van-goods-action',[_c('van-goods-action-icon',{staticClass:\"secletedico\",attrs:{\"icon\":\"guide-o\"}},[_vm._v(\"已选 \"+_vm._s(_vm.result.length)+\" 人 \")]),_c('div',{staticClass:\"selectedbtn\"},[(_vm.result != '')?_c('van-goods-action-button',{staticClass:\"confirmbtn\",attrs:{\"type\":\"info\",\"text\":\"确定\"},on:{\"click\":_vm.onClickButton}}):_c('van-goods-action-button',{staticClass:\"confirmbtn\",attrs:{\"type\":\"info\",\"text\":\"确定\",\"disabled\":\"\"},on:{\"click\":_vm.onClickButton}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"Choicecontacts\">\n    <div class=\"head\">\n      <van-nav-bar\n        fixed\n        title=\"选择联系人\"\n        left-text=\"返回\"\n        @click-left=\"backon\"\n        left-arrow\n        class=\"choice\"\n      >\n      </van-nav-bar>\n    </div>\n\n    <van-search\n      v-model=\"sms\"\n      @click=\"queryClick\"\n      @search=\"queryClick\"\n      @blur=\"queryClick\"\n      placeholder=\"请输入搜索关键词\"\n    />\n\n    <div class=\"body\">\n      <van-collapse v-model=\"activeNames\">\n        <van-collapse-item\n          v-for=\"(item, key) in everyoneArr\"\n          :key=\"key\"\n          :title=\"key\"\n          :name=\"key\"\n        >\n          <van-button type=\"default\" v-model=\"checkAll\" @click=\"chunk(item)\"\n            >全选</van-button\n          >\n          <van-button type=\"default\" @click=\"check(item)\">取消</van-button>\n          <van-checkbox-group v-model=\"result\">\n            <van-cell-group>\n              <van-cell\n                v-for=\"once in item\"\n                clickable\n                :key=\"once['user_id']\"\n                :title=\"` ${once['username']}`\"\n              >\n                <template #right-icon>\n                  <van-checkbox :name=\"once\" ref=\"checkboxes\" />\n                </template>\n              </van-cell>\n            </van-cell-group>\n          </van-checkbox-group>\n        </van-collapse-item>\n      </van-collapse>\n    </div>\n\n   \n\n    <div class=\"upload\">\n      <van-goods-action>\n        <van-goods-action-icon icon=\"guide-o\"\n        class=\"secletedico\"\n          >已选 {{ result.length }} 人\n        </van-goods-action-icon>\n        <div class=\"selectedbtn\">\n\n\n          <van-goods-action-button\n            v-if=\"result != ''\"\n            type=\"info\"\n            class=\"confirmbtn\"\n            text=\"确定\"\n            @click=\"onClickButton\"\n          />\n          <van-goods-action-button\n            v-else\n            type=\"info\"\n            class=\"confirmbtn\"\n            text=\"确定\"\n            @click=\"onClickButton\"\n            disabled\n          />\n\n        </div>\n      </van-goods-action>\n    </div>\n  </div>\n</template>\n\n\n<script>\nexport default {\n  name: \"Choicecontacts\",\n  data() {\n    return {\n      everyoneArr: [],\n      checkedVal: [],\n      activeNames: [],\n      result: [],\n      showQuery: false,\n      checkAll: false,\n      sms: \"\",\n      nowLoginId: \"\",\n    };\n  },\n\n  mounted() {\n    this.rander();\n  },\n\n  methods: {\n    //渲染\n    rander() {\n      this.Toast.loading({\n        message: \"\",\n        forbidClick: true,\n        duration: 10000,\n      });\n      this.$axios\n        .get({\n          url: \"message/maillist\",\n        })\n        .then((res) => {\n          console.log(res);\n          if (res) {\n            this.handleData(res);\n          }\n          this.Toast.clear();\n        });\n    },\n\n    //搜索栏\n    querys() {\n      this.showQuery = true;\n    },\n\n    //模糊搜索\n    queryClick() {\n      let sms = this.sms.trim();\n      if (sms == \"\") {\n        return \"搜索信息不能为空\";\n      }\n\n      this.$axios\n        .post({\n          url: \"message/querylist\",\n          data: {\n            msg: sms,\n          },\n        })\n        .then((res) => {\n          if (res.code == 0) {\n            let dataArr = {};\n            for (let x = 0; x < res.data.length; x++) {\n              console.log(dataArr[res.data[x].name]);\n              if (dataArr[res.data[x].name] != undefined) {\n                dataArr[res.data[x].name].push(res.data[x]);\n              } else {\n                dataArr[res.data[x].name] = [];\n                dataArr[res.data[x].name].push(res.data[x]);\n              }\n            }\n            this.everyoneArr = dataArr;\n            this.sms = \"\";\n            this.showQuery = false;\n          } else {\n            this.Toast(res.message);\n            this.sms = \"\";\n            this.showQuery = false;\n            // console.log(res.message)\n          }\n\n          // console.log(res, this.everyoneArr)\n        });\n    },\n\n    //取消\n    check: function (item) {\n      console.log(item);\n      if (this.result <= 0) {\n        return;\n      }\n      this.result = this.result.sort();\n      item = item.sort();\n      console.log(this.result, item)\n      // if (this.result.length >= item.length) {\n      for (let x = 0; x < this.result.length; x++) {\n        for (let i = 0; i < item.length; i++) {\n          if (x >= 0 && this.result[x] == undefined) {\n            console.log(111)\n            return;\n          }\n          console.log( this.result[x] == undefined);\n\n          if (this.result[x][\"user_id\"] == item[i][\"user_id\"]) {\n            this.result.splice(x, 1);\n          }\n        }\n      }\n      // console.log(this.result)\n    },\n    //全选\n    chunk: function (item) {\n      this.result.push(...item);\n      this.result = [...new Set(this.result)];\n    },\n\n    //确定选择\n    onClickButton() {\n      if (this.result.length <= 0) {\n        this.Toast(\"至少选择一人\");\n        return;\n      }\n      this.$router.push({\n        path: \"/message/messagesend\",\n        query: {\n          data: JSON.stringify(this.result),\n        },\n      });\n    },\n\n    //返回\n    backon() {\n      this.$router.push(\"/message/messagesend\");\n    },\n\n    //处理数据\n    handleData({ dataArr, listArr }) {\n      console.log(dataArr, listArr);\n      let allData = {};\n      for (let x = 0; x < listArr.length; x++) {\n        allData[listArr[x][\"name\"]] = [];\n\n        for (let i = 0; i < dataArr.length; i++) {\n          if (listArr[x][\"department_id\"] == dataArr[i][\"department_id\"]) {\n            allData[listArr[x][\"name\"]].push(dataArr[i]);\n          }\n        }\n      }\n      this.everyoneArr = allData;\n      // console.log(allData)\n    },\n  },\n};\n</script>\n\n\n\n<style scoped lang=\"less\">\n.querysClick {\n  margin: 2% auto;\n  width: 80%;\n  height: 70%;\n  border: 1px solid #999;\n  border-radius: 1.5rem;\n  overflow: hidden;\n  .btn {\n    border: none;\n    border-left: 1px solid #999;\n    span {\n      color: #777;\n    }\n  }\n}\n\n.choice {\n    height: 7vh;\n}\n\n.Choicecontacts {\n  width: 100%;\n  padding-top: 7vh;\n  \n\n  .body {\n    padding-bottom: 5rem;\n  }\n\n  .chunk {\n    padding: 0.7rem 2rem;\n  }\n\n  .upload {\n   padding: 1rem 1rem 5vh 1rem;\n    margin: 0 auto;\n  }\n}\n\n\n.selectedbtn {\n    padding-left: 1rem;\n    widows: 80%;\n  \n}\n\n.secletedico {\n    padding-left: 1rem;\n}\n\n/deep/ .van-goods-action {\n    height: 10vh;\n    width: 100%;\n}\n\n/deep/ .confirmbtn {\n        width: 70vw;\n        font-size: 1rem;\n} \n\n/deep/ .van-icon-arrow-left {\n  color: #000;\n  font-size: 1rem;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Choicecontacts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Choicecontacts.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Choicecontacts.vue?vue&type=template&id=bcea2812&scoped=true&\"\nimport script from \"./Choicecontacts.vue?vue&type=script&lang=js&\"\nexport * from \"./Choicecontacts.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Choicecontacts.vue?vue&type=style&index=0&id=bcea2812&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bcea2812\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Choicecontacts.vue?vue&type=style&index=0&id=bcea2812&scoped=true&lang=less&\""],"sourceRoot":""}