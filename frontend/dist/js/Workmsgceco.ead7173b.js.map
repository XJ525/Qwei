{"version":3,"sources":["webpack:///./src/views/workmessage/workmsgceco.vue?6e81","webpack:///src/views/workmessage/workmsgceco.vue","webpack:///./src/views/workmessage/workmsgceco.vue?5e5d","webpack:///./src/views/workmessage/workmsgceco.vue","webpack:///./src/views/workmessage/workmsgceco.vue?0d75"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","backon","scopedSlots","_u","key","fn","querys","proxy","model","value","callback","$$v","activeNames","expression","_l","item","$event","chunk","checkAll","_v","check","result","once","ref","refInFor","style","height","showQuery","queryClick","sms","_s","length","onClickButton","staticRenderFns","component"],"mappings":"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","file":"js/Workmsgceco.ead7173b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Choicecontacts\"},[_c('div',{staticClass:\"head\"},[_c('van-nav-bar',{attrs:{\"title\":\"选择联系人\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.backon},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"search\",\"size\":\"18\"},on:{\"click\":_vm.querys}})]},proxy:true}])})],1),_c('div',{staticClass:\"body\"},[_c('van-collapse',{model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=$$v},expression:\"activeNames\"}},_vm._l((_vm.everyoneArr),function(item,key){return _c('van-collapse-item',{key:key,attrs:{\"title\":key,\"name\":key}},[_c('van-button',{attrs:{\"type\":\"default\"},on:{\"click\":function($event){return _vm.chunk(item)}},model:{value:(_vm.checkAll),callback:function ($$v) {_vm.checkAll=$$v},expression:\"checkAll\"}},[_vm._v(\"全选\")]),_c('van-button',{attrs:{\"type\":\"default\"},on:{\"click\":function($event){return _vm.check(item)}}},[_vm._v(\"取消\")]),_c('van-checkbox-group',{model:{value:(_vm.result),callback:function ($$v) {_vm.result=$$v},expression:\"result\"}},[_c('van-cell-group',_vm._l((item),function(once){return _c('van-cell',{key:once['user_id'],attrs:{\"clickable\":\"\",\"title\":(\" \" + (once['username']))},scopedSlots:_vm._u([{key:\"right-icon\",fn:function(){return [_c('van-checkbox',{ref:\"checkboxes\",refInFor:true,attrs:{\"name\":once}})]},proxy:true}],null,true)})}),1)],1)],1)}),1)],1),_c('van-popup',{style:({ height: '7%' }),attrs:{\"position\":\"top\"},model:{value:(_vm.showQuery),callback:function ($$v) {_vm.showQuery=$$v},expression:\"showQuery\"}},[_c('div',{staticClass:\"querysClick\"},[_c('van-field',{style:({ height: '100%' }),attrs:{\"center\":\"\",\"clearable\":\"\",\"placeholder\":\"请输入用户名或部门\"},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [_c('van-button',{staticClass:\"btn\",attrs:{\"plain\":\"\",\"type\":\"info\"},on:{\"click\":_vm.queryClick}},[_vm._v(\"确认搜索\")])]},proxy:true}]),model:{value:(_vm.sms),callback:function ($$v) {_vm.sms=$$v},expression:\"sms\"}})],1)]),_c('div',{staticClass:\"upload\"},[_c('van-goods-action',[_c('van-goods-action-icon',{attrs:{\"icon\":\"chat-o\"}},[_vm._v(\"已选 \"+_vm._s(_vm.result.length)+\" 人 \")]),_c('van-goods-action-button',{attrs:{\"type\":\"danger\",\"text\":\"确定\"},on:{\"click\":_vm.onClickButton}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"Choicecontacts\">\n        <div class=\"head\">\n            <van-nav-bar title=\"选择联系人\" left-text=\"返回\" @click-left=\"backon\" left-arrow>\n\n                <template #right>\n                    <van-icon name=\"search\" size=\"18\" @click=\"querys\" />\n                </template>\n\n            </van-nav-bar>\n        </div>\n\n        <div class=\"body\">\n\n\n            <van-collapse v-model=\"activeNames\">\n                <van-collapse-item v-for=\"(item,key) in everyoneArr\" :key=\"key\" :title= key :name= key>\n                    <van-button type=\"default\" v-model=\"checkAll\" @click=\"chunk(item)\">全选</van-button>\n                    <van-button type=\"default\"  @click=\"check(item)\">取消</van-button>\n                    <van-checkbox-group v-model=\"result\">\n                        <van-cell-group>\n                            <van-cell\n                            v-for=\"(once) in item\"\n                            clickable\n                            :key=\"once['user_id']\"\n                            :title=\"` ${once['username']}`\"\n                            \n                            >\n                                <template #right-icon>\n                                    <van-checkbox :name=\"once\" ref=\"checkboxes\" />\n                                </template>\n                            </van-cell>\n                        </van-cell-group>\n                    </van-checkbox-group>\n\n                </van-collapse-item>\n            </van-collapse>\n        </div>  \n\n\n\n\n        <van-popup v-model=\"showQuery\" position=\"top\" :style=\"{ height: '7%' }\">\n\n            <div class=\"querysClick\">\n                <van-field\n                v-model=\"sms\"\n                center\n                clearable\n                placeholder=\"请输入用户名或部门\"\n                :style=\"{ height: '100%' }\"\n                >\n                <template #button>\n                    <van-button plain type=\"info\" class=\"btn\" @click=\"queryClick\">确认搜索</van-button>\n                </template>\n                </van-field>\n            </div>\n\n        </van-popup>\n\n        <div class=\"upload\">\n            <van-goods-action>\n                <van-goods-action-icon icon=\"chat-o\" >已选 {{ result.length }} 人 </van-goods-action-icon>\n                <van-goods-action-button\n                    type=\"danger\"\n                    text=\"确定\"\n                    @click=\"onClickButton\"\n                />\n            </van-goods-action>\n        </div>\n        \n\n    </div>\n</template>\n\n\n<script>\nexport default {\n    name: 'Choicecontacts',\n    data () {\n        return {\n            everyoneArr: [],\n            checkedVal: [],\n            activeNames: [],\n            result: [],\n            showQuery: false,\n            checkAll: false,\n            sms: '',\n            nowLoginId: ''\n        }\n    },\n\n    mounted () {\n        this.rander();\n    },\n\n    methods: {\n        //渲染\n        rander() {\n            this.Toast.loading({\n                message: \"\",\n                forbidClick: true,\n                duration: 10000\n            });\n            this.$axios.get({\n                url: 'message/maillist'\n            }).then(\n                res => {\n                    console.log(res)\n                    if (res) {\n                        this.handleData(res)\n                    }\n                    this.Toast.clear();\n\n                }\n            )\n        },\n\n        //搜索栏\n        querys() {\n            this.showQuery = true;\n        },\n\n        //模糊搜索\n        queryClick () {\n            let sms = this.sms.trim();\n            if (sms == '') {\n                return '搜索信息不能为空'\n            }\n\n            this.$axios.post({\n                url: 'message/querylist',\n                data: {\n                    msg: sms\n                }\n            }).then(\n                res => {\n                    if (res.code == 0) {\n                        let dataArr = {}\n                        for (let x = 0; x < res.data.length; x++) {\n                            console.log(dataArr[res.data[x].name])\n                            if (dataArr[res.data[x].name] != undefined) {\n                                dataArr[res.data[x].name].push(res.data[x])\n                            } else {\n                                dataArr[res.data[x].name] = [];\n                                dataArr[res.data[x].name].push(res.data[x])\n                            }\n                        }\n                        this.everyoneArr = dataArr\n                        this.sms = '';\n                        this.showQuery = false;\n                    } else {\n                        this.Toast(res.message);\n                        this.sms = '';\n                        this.showQuery = false;\n                        // console.log(res.message)\n                    }\n\n                    // console.log(res, this.everyoneArr)\n                }\n            )\n\n        },\n\n\n        //取消\n        check: function (item) {\n            console.log(item)\n            if (this.result <= 0) {\n                return\n            }\n\n            // if (this.result.length >= item.length) {\n                for (let x = 0; x < this.result.length; x++) {\n                    for (let i = 0; i < item.length; i++) {\n                        console.log(x, i, this.result[0] == undefined)\n                        // if (i > 0 && this.result[i - 1] == undefined) break;\n                        if (this.result[x]['user_id'] == item[i]['user_id']) {\n                            this.result.splice(x, 1)\n                        }\n                    }\n                }\n           \n        },\n        //全选\n        chunk: function (item) {\n            this.result.push(...item)\n            this.result = [...new Set(this.result)]\n        },\n\n        //确定选择\n        onClickButton () {\n            if (this.result.length <= 0) {\n                this.Toast('至少选择一人');\n                return;\n            }\n            this.$router.push({\n                path: '/workmessage/workmessagesend',\n                query: {\n                    data: JSON.stringify(this.result)\n                }\n            })\n\n        },\n\n        //返回\n        backon () {\n            this.$router.push('/workmessage/workmessagesend')\n        },\n\n        //处理数据\n        handleData ({ dataArr, listArr }) {\n            console.log(dataArr, listArr)\n            let allData = {};\n            for (let x = 0; x < listArr.length; x++) {\n                allData[listArr[x]['name']] = [];\n\n                for (let i = 0; i < dataArr.length; i++) {\n                    if (listArr[x]['department_id'] == dataArr[i]['department_id']) {\n                        allData[listArr[x]['name']].push(dataArr[i])\n                    }\n                }\n            }\n            this.everyoneArr = allData;\n            // console.log(allData)\n        }\n\n    }\n\n}\n</script>\n\n\n\n<style scoped lang=\"less\">\n\n.querysClick {\n    margin: 2% auto;\n    width: 80%;\n    height: 70%;\n    border: 1px solid #999;\n    border-radius: 1.5rem;\n    overflow: hidden;\n    .btn {\n        border: none;\n        border-left: 1px solid #999;\n        span {\n            color: #777;\n\n        }\n    }\n}\n\n.Choicecontacts {\n    width: 100%;\n\n    .body {\n        padding-bottom: 5rem;\n    }\n\n    .chunk {\n        padding: 0.7rem 2rem;\n    }\n\n    .upload {\n        width: 80%;\n    }\n\n}\n\n/deep/ .van-icon-arrow-left {\n    color:#000;\n    font-size:1rem;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workmsgceco.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workmsgceco.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./workmsgceco.vue?vue&type=template&id=4bbf264f&scoped=true&\"\nimport script from \"./workmsgceco.vue?vue&type=script&lang=js&\"\nexport * from \"./workmsgceco.vue?vue&type=script&lang=js&\"\nimport style0 from \"./workmsgceco.vue?vue&type=style&index=0&id=4bbf264f&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4bbf264f\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workmsgceco.vue?vue&type=style&index=0&id=4bbf264f&scoped=true&lang=less&\""],"sourceRoot":""}