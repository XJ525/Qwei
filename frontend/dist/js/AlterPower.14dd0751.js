(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AlterPower"],{b29a:function(t,e,a){},bffa:function(t,e,a){"use strict";a("b29a")},d127:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn"},[a("van-nav-bar",{staticClass:"head",attrs:{"left-text":"返回","right-text":"","left-arrow":"",title:"修改权限",fixed:!0},on:{"click-left":t.onClickLeft}}),a("van-cell-group",[a("van-field",{attrs:{label:"权限名",placeholder:"请输入权限名"},model:{value:t.power_data.pname,callback:function(e){t.$set(t.power_data,"pname",e)},expression:"power_data.pname"}})],1),a("van-cell-group",[a("van-field",{attrs:{label:"权限C/A",placeholder:"请输入权限C/A"},model:{value:t.power_data.purl,callback:function(e){t.$set(t.power_data,"purl",e)},expression:"power_data.purl"}})],1),a("van-field",{attrs:{readonly:"",clickable:"",label:"父级菜单",value:t.value,placeholder:"选择父级菜单"},on:{click:function(e){t.showPicker=!0}}}),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[a("van-picker",{attrs:{"show-toolbar":"","value-key":"",columns:t.power_arr},on:{cancel:function(e){t.showPicker=!1},confirm:t.onConfirmRole}})],1),""!=t.power_data.pname?a("van-button",{staticClass:"sub",attrs:{type:"info"},on:{click:t.submits}},[t._v("修改")]):a("van-button",{staticClass:"sub",attrs:{type:"info",disabled:""}},[t._v("修改")])],1)},r=[],s={data(){return{value:"",power_data:{},power_obj:{},power_arr:[],showPicker:!1,parentid:""}},methods:{onClickLeft(){this.$router.push({path:"/about/power"})},onConfirmRole(t){this.value=t,this.showPicker=!1;for(let e in this.power_obj)this.power_obj[e]==t&&(this.parentid=e)},submits(){this.Toast.loading({message:"修改中...",forbidClick:!0,duration:0}),this.$axios.post({url:"/power/update",data:{pid:this.$route.params.id,pname:this.power_data.pname,purl:this.power_data.purl,parentid:this.parentid}}).then(t=>{"0"==t.code?(this.Toast.success("修改成功"),this.$router.push({path:"/about/power"})):this.Toast.fail("修改失败")})}},mounted(){this.$axios.post({url:"/power/find",data:{pid:this.$route.params.id}}).then(t=>{t&&t.pid||0==t.pid?this.power_data=t:this.Toast.fail("请求失败"),console.log(555,this.power_data)}),this.$axios.get({url:"/power/select"}).then(t=>{if(t instanceof Array){let e={};t.forEach((t,a)=>{e[t.pid]=t.pname,this.power_arr.push(t.pname)}),e[0]="显示菜单",this.power_arr.splice(0,0,"显示菜单"),this.power_obj=e;for(let t in this.power_obj)this.$route.params.parentid==t&&(this.value=this.power_obj[t])}})}},i=s,n=(a("bffa"),a("2877")),l=Object(n["a"])(i,o,r,!1,null,"7d7606e2",null);e["default"]=l.exports}}]);
//# sourceMappingURL=AlterPower.14dd0751.js.map